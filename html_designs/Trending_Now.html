<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Trending Now - GoShopMe</title>
    <link rel="stylesheet" href="css/mobile-optimization.css">
    <link rel="stylesheet" href="css/chat-drawer-drag.css">
<script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700&family=Karla:wght@400;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#939BFB',
                        'shine-primary': '#939BFB',
                        'secondary-orange': '#F96226',
                        'shine-accent': '#F96226'
                    }
                }
            }
        }
    </script>
    <style>
        
/* ---- MOBILE FULL-WIDTH OVERRIDE (match Home) ---- */
@media screen and (max-width: 768px) {
  #app-shell, #main-content, #auth-screen, #welcome_screen, #quiz-screen, #onboarding-screen,
  #bottom-nav, #bottom-navigation, #header, #app-header,
  #chat-drawer, #chat-input-bar, #shai-chat-drawer, #return-chat-drawer, #return-chat-input-bar, #chat-input-collapsed,
  #shai-chat-drawer-wrapper, #chat-drawer-wrapper,
  body > div, body > main {
    max-width: 100vw !important;
    width: 100% !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    box-shadow: none !important;
    left: 0 !important;
    right: 0 !important;
    transform: none !important;
  }
  [class*="left-1/2"][class*="-translate-x-1/2"]:not([class*="rounded-full"]) {
    left: 0 !important;
    right: 0 !important;
    max-width: 100vw !important;
    width: 100% !important;
    transform: none !important;
  }
  #chat-drawer.translate-y-full, #shai-chat-drawer.translate-y-full, #return-chat-drawer.translate-y-full {
    transform: translateY(100%) !important;
  }
  #bottom-nav > div, #bottom-navigation > div, nav#bottom-nav > div, nav#bottom-navigation > div {
    padding-top: 2px !important;
    padding-bottom: 24px !important;
  }
}

* { font-family: 'DM Sans','Karla',-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif; }
        .poppins, .font-fahkwang { font-family: 'Poppins',-apple-system,BlinkMacSystemFont,sans-serif; }
        ::-webkit-scrollbar { display: none; }
        .scroll-x { overflow-x: auto; -ms-overflow-style: none; scrollbar-width: none; }

        /* Bottom nav */
        .bottom-nav-btn { display:flex; flex-direction:column; align-items:center; color:#6B7280; transition:color .2s ease-in-out; min-width:56px; padding:8px; }
        .bottom-nav-btn:hover, .bottom-nav-btn.active { color:#939BFB; }
        .bottom-nav-btn svg { width:20px; height:20px; margin-bottom:4px; stroke-width:1.5; }

        /* Header icon btn */
        .header-icon-btn { transition:transform .2s ease, color .2s ease; }
        .header-icon-btn:hover { transform:translateY(-2px); }

        /* Icon buttons (input bar + drawer) */
        .icon-button svg { width:18px; height:18px; stroke-width:1.5; }
        .icon-button:hover svg { color:#939BFB; }

        /* Product image overlay */
        .product-image-overlay-wrap { position:relative; overflow:hidden; }
        .product-image-overlay-wrap::after {
            content:''; position:absolute; inset:0;
            background:rgba(0,0,0,.08); pointer-events:none; z-index:0;
        }
        .product-image-overlay-wrap > .absolute { z-index:1; }

        /* Overlay icons */
        .product-overlay-icon { color:white !important; stroke:white !important; }
        .share-icon-tilted { transform:rotate(-35deg); }
        .heart-filled { fill:#939BFB !important; stroke:#939BFB !important; }

        /* Product card tap */
        .product-card { cursor:pointer; transition:transform .15s ease; -webkit-tap-highlight-color:rgba(147,155,251,.12); touch-action:manipulation; }
        .product-card:active { transform:scale(.97); }

        /* ── Chat drawer (same as Home: translate-y-full = hidden) ── */
        #chat-drawer {
            position:fixed;
            bottom:88px;                          /* above nav + safe area padding */
            left:50%; transform:translateX(-50%);
            width:100%; max-width:390px;
            background:#fff;
            border-radius:24px 24px 0 0;
            box-shadow:0 -6px 32px rgba(0,0,0,.16);
            z-index:50;
            display:flex; flex-direction:column;
            height:50vh;
            transition:transform .3s cubic-bezier(.32,.72,0,1);
            border-top:1px solid #f3f4f6;
        }
        #chat-drawer.translate-y-full { transform:translateX(-50%) translateY(100%); }
        #chat-drawer:not(.translate-y-full) { transform:translateX(-50%) translateY(0); }

        /* ── Mobile: full-width drawer, Y-only slide, sit above nav ── */
        @media (max-width: 768px) {
            #chat-drawer {
                left:0 !important; right:0 !important;
                max-width:100% !important;
                bottom: 88px !important;
            }
            #chat-input-bar {
                bottom: 88px !important;
            }
            #chat-drawer.translate-y-full {
                transform:translateY(100%) !important;
            }
            #chat-drawer:not(.translate-y-full) {
                transform:translateY(0) !important;
            }
        }

        /* Drag handle zone */
        .drag-zone { display:flex; justify-content:center; padding:10px 0 6px; cursor:grab; touch-action:none; flex-shrink:0; user-select:none; -webkit-tap-highlight-color:transparent; min-height:44px; align-items:center; }
        .drag-zone:active { cursor:grabbing; }
        .drag-pill { width:40px; height:4px; background:#d1d5db; border-radius:99px; pointer-events:none; }

        /* Chat messages area */
        #chat-messages { flex:1; overflow-y:auto; -webkit-overflow-scrolling:touch; overscroll-behavior:contain; }

        /* ── Collapsed input bar — above bottom nav (88px for nav + safe area) ── */
        #chat-input-bar {
            position:fixed;
            bottom:88px;                          /* above nav + safe area padding */
            left:50%; transform:translateX(-50%);
            width:100%; max-width:390px;
            background:#fff;
            border-top:1px solid #f3f4f6;
            padding:12px 16px;
            z-index:30;                           /* below drawer (z-50) and overlay (z-40) */
        }
        #chat-input-bar.hidden { display:none !important; }

        /* ── Auto-grow textarea ── */
        #message-input, #chat-input-drawer-field {
            resize: none;
            overflow: hidden;
            line-height: 1.4;
            max-height: calc(1.4em * 6);
        }

        /* ── Voice recording wave animation ── */
        @keyframes wavePulse {
            0%, 100% { transform: scaleY(1); }
            50%       { transform: scaleY(2); }
        }
        .wave-bar.playing { animation: wavePulse 1.1s ease-in-out infinite; }
    </style>
</head>
<body class="bg-[#F6F6F6] text-black overflow-x-hidden">

<div class="relative mx-auto w-full max-w-[390px] bg-white min-h-screen">

    <!-- ── Header ── -->
    <header class="fixed top-0 left-1/2 -translate-x-1/2 w-full max-w-[390px] bg-white z-50 border-b border-gray-100">
        <div class="flex items-center justify-between px-4 py-3">
            <button onclick="location.href='Home.html'"
                    class="header-icon-btn w-10 h-10 flex items-center justify-center text-gray-600 hover:text-gray-800" aria-label="Back">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"/>
                </svg>
            </button>
            <h1 class="text-lg font-semibold text-gray-900 poppins">Trending Now</h1>
            <div class="flex items-center">
                <a href="Notifications_Screen.html" class="header-icon-btn w-10 h-10 flex items-center justify-center text-gray-600 hover:text-gray-800" aria-label="Notifications">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"/></svg>
                </a>
                <a href="Shopping_bag.html" class="header-icon-btn w-10 h-10 flex items-center justify-center text-gray-600 hover:text-gray-800" aria-label="Shopping bag">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119.993z"/></svg>
                </a>
            </div>
        </div>
    </header>

    <!-- ── Main ── -->
    <main class="pt-[68px] px-4 pb-52">

        <!-- Just For You -->
        <section class="py-4">
            <h2 class="text-lg font-bold text-black mb-0.5 poppins">Just For You</h2>
            <p class="text-xs text-gray-500 mb-3">Based on your style quiz and past purchases</p>
            <div class="flex gap-3 scroll-x pb-2 -mx-1 px-1">

                <div class="product-card flex-shrink-0 w-40 bg-white rounded-xl overflow-hidden shadow-sm"
                     data-pid="silk-midi-dress" data-name="Silk Midi Dress" data-brand="Reformation" data-price="$248"
                     data-img="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/silk%20midi%20dress.jpg">
                    <div class="product-image-overlay-wrap bg-gray-100 rounded-t-xl h-48">
                        <img class="w-full h-full object-cover" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/silk%20midi%20dress.jpg" alt="Silk Midi Dress" loading="lazy">
                        <div class="absolute top-2 right-2 flex flex-col space-y-2">
                            <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity wishlist-btn" data-pid="silk-midi-dress" aria-label="Add to wishlist"><svg class="w-[18px] h-[18px] product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"/></svg></button>
                            <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity share-product-btn" aria-label="Share"><svg class="w-[18px] h-[18px] product-overlay-icon share-icon-tilted" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"/></svg></button>
                            <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity chat-trigger" aria-label="Ask ShAI"><svg class="w-4 h-4 product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"/></svg></button>
                        </div>
                    </div>
                    <div class="p-2.5"><p class="text-[11px] text-gray-500 mb-0.5 font-medium">Reformation</p><h4 class="font-semibold text-black text-sm mb-1.5 leading-tight poppins">Silk Midi Dress</h4><span class="text-black font-semibold text-sm">$248</span></div>
                </div>

                <div class="product-card flex-shrink-0 w-40 bg-white rounded-xl overflow-hidden shadow-sm"
                     data-pid="cashmere-sweater" data-name="Cashmere Sweater" data-brand="Everlane" data-price="$120" data-original-price="$150"
                     data-img="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/cashmere%20sweater.jpg">
                    <div class="product-image-overlay-wrap bg-gray-100 rounded-t-xl h-48">
                        <img class="w-full h-full object-cover" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/cashmere%20sweater.jpg" alt="Cashmere Sweater" loading="lazy">
                        <div class="absolute bottom-2 left-2 bg-[#F96226] text-white px-2 py-0.5 rounded-md text-[10px] font-bold z-10">20% OFF</div>
                        <div class="absolute top-2 right-2 flex flex-col space-y-2">
                            <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity wishlist-btn" data-pid="cashmere-sweater" aria-label="Add to wishlist"><svg class="w-[18px] h-[18px] product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"/></svg></button>
                            <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity share-product-btn" aria-label="Share"><svg class="w-[18px] h-[18px] product-overlay-icon share-icon-tilted" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"/></svg></button>
                            <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity chat-trigger" aria-label="Ask ShAI"><svg class="w-4 h-4 product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"/></svg></button>
                        </div>
                    </div>
                    <div class="p-2.5"><p class="text-[11px] text-gray-500 mb-0.5 font-medium">Everlane</p><h4 class="font-semibold text-black text-sm mb-1.5 leading-tight poppins">Cashmere Sweater</h4><div class="flex items-center gap-1.5"><span class="text-[#F96226] font-semibold text-sm">$120</span><span class="text-gray-400 line-through text-xs">$150</span></div></div>
                </div>

                <div class="product-card flex-shrink-0 w-40 bg-white rounded-xl overflow-hidden shadow-sm"
                     data-pid="leather-ankle-boots" data-name="Leather Ankle Boots" data-brand="Acne Studios" data-price="$520"
                     data-img="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/leather%20ankle%20boots.jpg">
                    <div class="product-image-overlay-wrap bg-gray-100 rounded-t-xl h-48">
                        <img class="w-full h-full object-cover" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/leather%20ankle%20boots.jpg" alt="Leather Ankle Boots" loading="lazy">
                        <div class="absolute top-2 right-2 flex flex-col space-y-2">
                            <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity wishlist-btn" data-pid="leather-ankle-boots" aria-label="Add to wishlist"><svg class="w-[18px] h-[18px] product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"/></svg></button>
                            <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity share-product-btn" aria-label="Share"><svg class="w-[18px] h-[18px] product-overlay-icon share-icon-tilted" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"/></svg></button>
                            <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity chat-trigger" aria-label="Ask ShAI"><svg class="w-4 h-4 product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"/></svg></button>
                        </div>
                    </div>
                    <div class="p-2.5"><p class="text-[11px] text-gray-500 mb-0.5 font-medium">Acne Studios</p><h4 class="font-semibold text-black text-sm mb-1.5 leading-tight poppins">Leather Ankle Boots</h4><span class="text-black font-semibold text-sm">$520</span></div>
                </div>

                <div class="product-card flex-shrink-0 w-40 bg-white rounded-xl overflow-hidden shadow-sm"
                     data-pid="structured-blazer" data-name="Structured Blazer" data-brand="Theory" data-price="$395"
                     data-img="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/Saint%20Laurent%20Blazer.jpg">
                    <div class="product-image-overlay-wrap bg-gray-100 rounded-t-xl h-48">
                        <img class="w-full h-full object-cover" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/Saint%20Laurent%20Blazer.jpg" alt="Structured Blazer" loading="lazy">
                        <div class="absolute top-2 right-2 flex flex-col space-y-2">
                            <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity wishlist-btn" data-pid="structured-blazer" aria-label="Add to wishlist"><svg class="w-[18px] h-[18px] product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"/></svg></button>
                            <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity share-product-btn" aria-label="Share"><svg class="w-[18px] h-[18px] product-overlay-icon share-icon-tilted" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"/></svg></button>
                            <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity chat-trigger" aria-label="Ask ShAI"><svg class="w-4 h-4 product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"/></svg></button>
                        </div>
                    </div>
                    <div class="p-2.5"><p class="text-[11px] text-gray-500 mb-0.5 font-medium">Theory</p><h4 class="font-semibold text-black text-sm mb-1.5 leading-tight poppins">Structured Blazer</h4><span class="text-black font-semibold text-sm">$395</span></div>
                </div>

                <div class="product-card flex-shrink-0 w-40 bg-white rounded-xl overflow-hidden shadow-sm"
                     data-pid="gold-chain-necklace" data-name="Gold Chain Necklace" data-brand="Mejuri" data-price="$158"
                     data-img="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/gold%20necklace.jpg">
                    <div class="product-image-overlay-wrap bg-gray-100 rounded-t-xl h-48">
                        <img class="w-full h-full object-cover" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/gold%20necklace.jpg" alt="Gold Chain Necklace" loading="lazy">
                        <div class="absolute top-2 right-2 flex flex-col space-y-2">
                            <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity wishlist-btn" data-pid="gold-chain-necklace" aria-label="Add to wishlist"><svg class="w-[18px] h-[18px] product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"/></svg></button>
                            <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity share-product-btn" aria-label="Share"><svg class="w-[18px] h-[18px] product-overlay-icon share-icon-tilted" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"/></svg></button>
                            <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity chat-trigger" aria-label="Ask ShAI"><svg class="w-4 h-4 product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"/></svg></button>
                        </div>
                    </div>
                    <div class="p-2.5"><p class="text-[11px] text-gray-500 mb-0.5 font-medium">Mejuri</p><h4 class="font-semibold text-black text-sm mb-1.5 leading-tight poppins">Gold Chain Necklace</h4><span class="text-black font-semibold text-sm">$158</span></div>
                </div>

            </div>
        </section>

        <!-- Brand Focus Drop -->
        <section class="py-4">
            <div class="bg-black rounded-2xl overflow-hidden relative">
                <img class="w-full h-80 object-cover" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/Saint%20Laurent%20Blazer.jpg" alt="Saint Laurent Fall '25">
                <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"></div>
                <div class="absolute bottom-0 left-0 right-0 p-5">
                    <div class="text-white mb-3">
                        <h3 class="text-xl font-bold mb-1 poppins">Saint Laurent Fall '25</h3>
                        <p class="text-base font-medium opacity-90">Rooted in Refinement</p>
                    </div>
                    <button id="brand-drop-btn" class="bg-white text-black px-5 py-2.5 rounded-full font-semibold text-sm hover:bg-gray-100 transition-colors">
                        Explore the Drop
                    </button>
                </div>
            </div>
        </section>

        <!-- Celebrity Style Picks -->
        <section class="py-4">
            <h2 class="text-lg font-bold text-black mb-3 poppins">Celebrity Style Picks</h2>
            <div class="mb-5">
                <div class="relative mb-3">
                    <img class="w-full h-80 object-cover rounded-2xl" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/reformation%20midi%20dress.jpg" alt="Zendaya Paris Fashion Week">
                    <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent rounded-b-2xl p-4">
                        <p class="text-[10px] text-white/70 mb-0.5 font-medium uppercase tracking-wide">Celebrity Style</p>
                        <h3 class="text-base font-bold text-white leading-tight poppins">Zendaya wearing vintage Mugler at Paris Fashion Week</h3>
                    </div>
                </div>
                <div class="flex gap-3 scroll-x pb-2 -mx-1 px-1">

                    <div class="product-card flex-shrink-0 w-40 bg-white rounded-xl overflow-hidden shadow-sm"
                         data-pid="vintage-blazer" data-name="Vintage Blazer" data-brand="Mugler" data-price="$850"
                         data-img="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/mugler%20blazer.jpg">
                        <div class="product-image-overlay-wrap bg-gray-100 rounded-t-xl h-48">
                            <img class="w-full h-full object-cover" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/mugler%20blazer.jpg" alt="Vintage Blazer" loading="lazy">
                            <div class="absolute top-2 right-2 flex flex-col space-y-2">
                                <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity wishlist-btn" data-pid="vintage-blazer" aria-label="Add to wishlist"><svg class="w-[18px] h-[18px] product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"/></svg></button>
                                <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity share-product-btn" aria-label="Share"><svg class="w-[18px] h-[18px] product-overlay-icon share-icon-tilted" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"/></svg></button>
                                <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity chat-trigger" aria-label="Ask ShAI"><svg class="w-4 h-4 product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"/></svg></button>
                            </div>
                        </div>
                        <div class="p-2.5"><p class="text-[11px] text-gray-500 mb-0.5 font-medium">Mugler</p><h4 class="font-semibold text-black text-sm mb-1.5 leading-tight poppins">Vintage Blazer</h4><span class="text-black font-semibold text-sm">$850</span></div>
                    </div>

                    <div class="product-card flex-shrink-0 w-40 bg-white rounded-xl overflow-hidden shadow-sm"
                         data-pid="statement-earrings" data-name="Statement Earrings" data-brand="Bottega Veneta" data-price="$1,200"
                         data-img="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/chain%20necklace.jpg">
                        <div class="product-image-overlay-wrap bg-gray-100 rounded-t-xl h-48">
                            <img class="w-full h-full object-cover" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/chain%20necklace.jpg" alt="Statement Earrings" loading="lazy">
                            <div class="absolute top-2 right-2 flex flex-col space-y-2">
                                <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity wishlist-btn" data-pid="statement-earrings" aria-label="Add to wishlist"><svg class="w-[18px] h-[18px] product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"/></svg></button>
                                <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity share-product-btn" aria-label="Share"><svg class="w-[18px] h-[18px] product-overlay-icon share-icon-tilted" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"/></svg></button>
                                <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity chat-trigger" aria-label="Ask ShAI"><svg class="w-4 h-4 product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"/></svg></button>
                            </div>
                        </div>
                        <div class="p-2.5"><p class="text-[11px] text-gray-500 mb-0.5 font-medium">Bottega Veneta</p><h4 class="font-semibold text-black text-sm mb-1.5 leading-tight poppins">Statement Earrings</h4><span class="text-black font-semibold text-sm">$1,200</span></div>
                    </div>

                    <div class="product-card flex-shrink-0 w-40 bg-white rounded-xl overflow-hidden shadow-sm"
                         data-pid="pointed-pumps" data-name="Pointed Pumps" data-brand="Louboutin" data-price="$745"
                         data-img="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/leather%20ankle%20boots.jpg">
                        <div class="product-image-overlay-wrap bg-gray-100 rounded-t-xl h-48">
                            <img class="w-full h-full object-cover" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/leather%20ankle%20boots.jpg" alt="Pointed Pumps" loading="lazy">
                            <div class="absolute top-2 right-2 flex flex-col space-y-2">
                                <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity wishlist-btn" data-pid="pointed-pumps" aria-label="Add to wishlist"><svg class="w-[18px] h-[18px] product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"/></svg></button>
                                <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity share-product-btn" aria-label="Share"><svg class="w-[18px] h-[18px] product-overlay-icon share-icon-tilted" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"/></svg></button>
                                <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity chat-trigger" aria-label="Ask ShAI"><svg class="w-4 h-4 product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"/></svg></button>
                            </div>
                        </div>
                        <div class="p-2.5"><p class="text-[11px] text-gray-500 mb-0.5 font-medium">Louboutin</p><h4 class="font-semibold text-black text-sm mb-1.5 leading-tight poppins">Pointed Pumps</h4><span class="text-black font-semibold text-sm">$745</span></div>
                    </div>

                </div>
            </div>
        </section>

        <!-- Creator Spotlight -->
        <section class="py-4">
            <h2 class="text-lg font-bold text-black mb-3 poppins">Creator Spotlight</h2>
            <div class="mb-5">
                <div class="flex items-center gap-2.5 mb-3">
                    <img class="w-11 h-11 rounded-full object-cover border-2 border-[#939BFB]/20" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/avatars/avatar-1.jpg" alt="@StyledByMira">
                    <div>
                        <h3 class="text-base font-bold text-black leading-tight poppins">
                            Neutral Power by <span class="text-[#939BFB] hover:opacity-80 transition-opacity creator-link cursor-pointer" data-creator="StyledByMira">@StyledByMira</span>
                        </h3>
                        <p class="text-xs text-gray-600 font-medium">Minimalist elegance</p>
                    </div>
                </div>
                <div class="relative mb-3">
                    <img class="w-full h-80 object-cover rounded-2xl" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/Neutrals.jpg" alt="Neutral Power look">
                </div>
                <div class="flex gap-3 scroll-x pb-2 -mx-1 px-1">

                    <div class="product-card flex-shrink-0 w-40 bg-white rounded-xl overflow-hidden shadow-sm"
                         data-pid="cream-knit-top" data-name="Cream Knit Top" data-brand="COS" data-price="$89"
                         data-img="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/cashmere%20sweater.jpg">
                        <div class="product-image-overlay-wrap bg-gray-100 rounded-t-xl h-48">
                            <img class="w-full h-full object-cover" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/cashmere%20sweater.jpg" alt="Cream Knit Top" loading="lazy">
                            <div class="absolute top-2 right-2 flex flex-col space-y-2">
                                <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity wishlist-btn" data-pid="cream-knit-top" aria-label="Add to wishlist"><svg class="w-[18px] h-[18px] product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"/></svg></button>
                                <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity share-product-btn" aria-label="Share"><svg class="w-[18px] h-[18px] product-overlay-icon share-icon-tilted" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"/></svg></button>
                                <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity chat-trigger" aria-label="Ask ShAI"><svg class="w-4 h-4 product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"/></svg></button>
                            </div>
                        </div>
                        <div class="p-2.5"><p class="text-[11px] text-gray-500 mb-0.5 font-medium">COS</p><h4 class="font-semibold text-black text-sm mb-1.5 leading-tight poppins">Cream Knit Top</h4><span class="text-black font-semibold text-sm">$89</span></div>
                    </div>

                    <div class="product-card flex-shrink-0 w-40 bg-white rounded-xl overflow-hidden shadow-sm"
                         data-pid="wide-leg-trousers" data-name="Wide Leg Trousers" data-brand="& Other Stories" data-price="$125"
                         data-img="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/bottega%20venetta%20dress.jpg">
                        <div class="product-image-overlay-wrap bg-gray-100 rounded-t-xl h-48">
                            <img class="w-full h-full object-cover" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/bottega%20venetta%20dress.jpg" alt="Wide Leg Trousers" loading="lazy">
                            <div class="absolute top-2 right-2 flex flex-col space-y-2">
                                <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity wishlist-btn" data-pid="wide-leg-trousers" aria-label="Add to wishlist"><svg class="w-[18px] h-[18px] product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"/></svg></button>
                                <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity share-product-btn" aria-label="Share"><svg class="w-[18px] h-[18px] product-overlay-icon share-icon-tilted" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"/></svg></button>
                                <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity chat-trigger" aria-label="Ask ShAI"><svg class="w-4 h-4 product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"/></svg></button>
                            </div>
                        </div>
                        <div class="p-2.5"><p class="text-[11px] text-gray-500 mb-0.5 font-medium">& Other Stories</p><h4 class="font-semibold text-black text-sm mb-1.5 leading-tight poppins">Wide Leg Trousers</h4><span class="text-black font-semibold text-sm">$125</span></div>
                    </div>

                    <div class="product-card flex-shrink-0 w-40 bg-white rounded-xl overflow-hidden shadow-sm"
                         data-pid="leather-loafers" data-name="Leather Loafers" data-brand="Totême" data-price="$340"
                         data-img="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/shoes.jpg">
                        <div class="product-image-overlay-wrap bg-gray-100 rounded-t-xl h-48">
                            <img class="w-full h-full object-cover" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/shoes.jpg" alt="Leather Loafers" loading="lazy">
                            <div class="absolute top-2 right-2 flex flex-col space-y-2">
                                <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity wishlist-btn" data-pid="leather-loafers" aria-label="Add to wishlist"><svg class="w-[18px] h-[18px] product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"/></svg></button>
                                <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity share-product-btn" aria-label="Share"><svg class="w-[18px] h-[18px] product-overlay-icon share-icon-tilted" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"/></svg></button>
                                <button type="button" class="p-1 flex items-center justify-center hover:opacity-80 transition-opacity chat-trigger" aria-label="Ask ShAI"><svg class="w-4 h-4 product-overlay-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"/></svg></button>
                            </div>
                        </div>
                        <div class="p-2.5"><p class="text-[11px] text-gray-500 mb-0.5 font-medium">Totême</p><h4 class="font-semibold text-black text-sm mb-1.5 leading-tight poppins">Leather Loafers</h4><span class="text-black font-semibold text-sm">$340</span></div>
                    </div>

                </div>
            </div>
        </section>

    </main>

</div><!-- /app-shell -->

<!-- ── Chat Overlay (tap to close drawer) ── -->
<div id="chat-overlay" class="fixed inset-0 bg-black/40 z-40 hidden"></div>

<!-- ── ShAI Chat Drawer — slides up from above bottom nav (same as Home) ── -->
<div id="chat-drawer" class="translate-y-full">
    <!-- Drag handle -->
    <div id="drag-handle-zone" class="drag-zone chat-drawer-drag-zone">
        <div class="drag-pill"></div>
    </div>

    <!-- Drawer header -->
    <div id="chat-header" class="flex items-center p-4 pb-2 flex-shrink-0">
        <button id="back-btn" class="hidden mr-2 p-1 hover:opacity-70 transition-opacity" aria-label="Back">
            <svg class="w-5 h-5 text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"/>
            </svg>
        </button>
        <div class="w-8 h-8 rounded-full overflow-hidden mr-3 flex-shrink-0">
            <img class="w-full h-full object-cover" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/shai-avatar.png"
                 onerror="this.style.display='none';this.nextElementSibling.style.display='flex'"
                 alt="ShAI" data-shai-avatar>
            <div style="display:none;width:100%;height:100%;background:#e5e7eb;align-items:center;justify-content:center;font-size:10px;font-weight:600;color:#6b7280;">AI</div>
        </div>
        <div class="flex-1">
            <p id="header-title" class="font-semibold text-black text-sm">ShAI</p>
            <p id="header-subtitle" class="text-xs text-gray-500">Your shopping assistant</p>
        </div>
    </div>

    <!-- Messages -->
    <div id="chat-content" class="flex-1 flex flex-col min-h-0">
        <div id="chat-messages" class="flex-1 overflow-y-auto">
            <div class="p-4 pb-0">
                <div class="flex items-start space-x-3 mb-4">
                    <div class="w-10 h-10 rounded-full overflow-hidden flex-shrink-0">
                        <img class="w-full h-full object-cover" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/shai-avatar.png"
                             onerror="this.style.display='none'"
                             alt="ShAI" data-shai-avatar>
                    </div>
                    <div class="flex-1">
                        <div class="bg-gray-50 rounded-2xl rounded-tl-md p-3">
                            <p class="text-sm text-black break-words whitespace-pre-wrap">Hi! I'm ShAI. Tap any product's chat icon or ask me anything about style, sizing, or alternatives.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Drawer input (inside chat, same design as collapsed bar) -->
        <div id="chat-input-drawer" class="bg-white border-t border-gray-100 p-4 flex-shrink-0">
            <div class="flex items-center gap-2 bg-white rounded-2xl border border-gray-200 px-4 py-3 shadow-sm">
                <button id="cam-btn-drawer" class="icon-button hover:opacity-70 transition-opacity" aria-label="Camera">
                    <svg class="w-[18px] h-[18px] text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"/><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"/></svg>
                </button>
                <textarea id="chat-input-drawer-field" rows="1" placeholder="Message ShAI..." class="flex-1 bg-transparent outline-none text-black placeholder-gray-500 text-sm resize-none overflow-hidden" style="min-height:24px"></textarea>
                <button id="add-friend-btn-drawer" class="icon-button hover:opacity-70 transition-opacity" aria-label="Add friend">
                    <svg class="w-[18px] h-[18px] text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"/></svg>
                </button>
                <button id="mic-btn-drawer" class="icon-button hover:opacity-70 transition-opacity" aria-label="Voice">
                    <svg class="w-[18px] h-[18px] text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18.75a6 6 0 006-6v-1.5m-6 7.5a6 6 0 01-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 01-3-3V4.5a3 3 0 116 0v8.25a3 3 0 01-3 3z"/></svg>
                </button>
                <button id="send-btn-drawer" class="text-[#939BFB] hidden hover:opacity-70 transition-opacity" aria-label="Send">
                    <svg class="w-[18px] h-[18px]" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"/></svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Add friend panel (hidden by default) -->
    <div id="add-friend-content" class="flex-1 flex flex-col min-h-0 hidden">
        <div id="contact-list" class="flex-1 overflow-y-auto p-4">
            <div class="mb-4">
                <div class="relative">
                    <svg class="w-4 h-4 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"/></svg>
                    <input type="text" id="contact-search" placeholder="Search contacts..." class="w-full bg-gray-50 border border-gray-200 rounded-xl px-4 py-2 pl-10 text-sm">
                </div>
            </div>
            <div id="contacts-container" class="space-y-2"></div>
        </div>
        <div class="bg-white border-t border-gray-100 p-4 flex-shrink-0">
            <div class="flex items-center gap-2 bg-white rounded-2xl border border-gray-200 px-4 py-3 shadow-sm">
                <button class="icon-button hover:opacity-70 transition-opacity" aria-label="Camera">
                    <svg class="w-[18px] h-[18px] text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"/><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"/></svg>
                </button>
                <input type="text" placeholder="Message ShAI..." class="flex-1 bg-transparent outline-none text-black placeholder-gray-500 min-h-[24px] text-sm">
                <button class="icon-button hover:opacity-70 transition-opacity" aria-label="Add friend">
                    <svg class="w-[18px] h-[18px] text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"/></svg>
                </button>
                <button class="icon-button hover:opacity-70 transition-opacity" aria-label="Voice">
                    <svg class="w-[18px] h-[18px] text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18.75a6 6 0 006-6v-1.5m-6 7.5a6 6 0 01-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 01-3-3V4.5a3 3 0 116 0v8.25a3 3 0 01-3 3z"/></svg>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- ── Collapsed input bar — always visible above bottom nav ── -->
<div id="chat-input-bar">
    <div class="flex items-center gap-2 bg-white rounded-2xl border border-gray-200 px-4 py-3 shadow-sm">
        <button id="cam-btn" class="icon-button hover:opacity-70 transition-opacity" aria-label="Camera">
            <svg class="w-[18px] h-[18px] text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"/><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"/></svg>
        </button>
        <textarea id="message-input" rows="1" placeholder="Message ShAI..." class="flex-1 bg-transparent outline-none text-black placeholder-gray-500 text-sm resize-none overflow-hidden" style="min-height:24px"></textarea>
        <button id="add-friend-btn" class="icon-button hover:opacity-70 transition-opacity" aria-label="Add friend">
            <svg class="w-[18px] h-[18px] text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"/></svg>
        </button>
        <button id="mic-btn" class="icon-button hover:opacity-70 transition-opacity" aria-label="Voice">
            <svg class="w-[18px] h-[18px] text-black" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18.75a6 6 0 006-6v-1.5m-6 7.5a6 6 0 01-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 01-3-3V4.5a3 3 0 116 0v8.25a3 3 0 01-3 3z"/></svg>
        </button>
        <button id="send-btn" class="text-[#939BFB] hidden hover:opacity-70 transition-opacity" aria-label="Send">
            <svg class="w-[18px] h-[18px]" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"/></svg>
        </button>
    </div>
</div>

<!-- ── Bottom Navigation ── -->
<nav id="bottom-nav" class="fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[390px] bg-white border-t border-gray-100 z-50">
    <div class="flex items-center justify-around py-2">
        <a href="Home.html" class="bottom-nav-btn">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"/></svg>
            <span class="text-xs">Home</span>
        </a>
        <a href="Picks.html" class="bottom-nav-btn">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"/></svg>
            <span class="text-xs">Picks</span>
        </a>
        <a href="Wishlist.html" class="bottom-nav-btn">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"/></svg>
            <span class="text-xs">Wishlist</span>
        </a>
        <a href="User_Profile_Free_Plan.html" class="bottom-nav-btn" id="profile-nav-link">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"/></svg>
            <span class="text-xs">Profile</span>
        </a>
    </div>
</nav>

<script>
(function () {
    'use strict';

    /* ── Helpers ─────────────────────────────────────── */
    function esc(s) { return (s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }
    function shaiAvSrc() { var el = document.querySelector('[data-shai-avatar]'); return (el && el.src) ? el.src : 'https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/shai-avatar.png'; }

    /* ── Profile nav ──────────────────────────────────── */
    try {
        var plan = (localStorage.getItem('__userPlan')||'').toLowerCase();
        var plink = document.getElementById('profile-nav-link');
        if (plink) plink.href = (plan==='paid'||plan==='true') ? 'User_Profile_Paid_Plan.html' : 'User_Profile_Free_Plan.html';
    } catch(e){}

    /* ── Chat drawer elements ─────────────────────────── */
    var drawer    = document.getElementById('chat-drawer');
    var overlay   = document.getElementById('chat-overlay');
    var inputBar  = document.getElementById('chat-input-bar');
    var dragZone  = document.getElementById('drag-handle-zone');
    var chatMsgs  = document.getElementById('chat-messages');
    var chatContent     = document.getElementById('chat-content');
    var addFriendContent = document.getElementById('add-friend-content');
    var contactsContainer = document.getElementById('contacts-container');
    var contactSearch   = document.getElementById('contact-search');
    var backBtn         = document.getElementById('back-btn');
    var headerTitle     = document.getElementById('header-title');
    var headerSubtitle  = document.getElementById('header-subtitle');
    /* drawer input */
    var dInput    = document.getElementById('chat-input-drawer-field');
    var dSend     = document.getElementById('send-btn-drawer');
    var dMic      = document.getElementById('mic-btn-drawer');
    var dAddFriend = document.getElementById('add-friend-btn-drawer');
    var dCam      = document.getElementById('cam-btn-drawer');
    /* collapsed bar input */
    var bInput    = document.getElementById('message-input');
    var bSend     = document.getElementById('send-btn');
    var bMic      = document.getElementById('mic-btn');
    var bAddFriend = document.getElementById('add-friend-btn');
    var bCam      = document.getElementById('cam-btn');

    var isAddFriendMode = false;
    var isRecording     = false;
    var mediaRecorder;
    var audioChunks     = [];
    var startX          = 0;
    var micAccessDenied = false;
    var mediaStream     = null;

    var isOpen = false;
    var currentHeight = 80;
    var isDragging = false;
    var CLOSE_THRESHOLD = 30;

    /* ── Open / close (same as Home: translate-y-full, always reset height) ── */
    function expandDrawer() {
        if (!drawer) return;
        drawer.classList.remove('translate-y-full');
        if (overlay) overlay.classList.remove('hidden');
        if (inputBar) inputBar.classList.add('hidden');
        isOpen = true;
        drawer.style.height = '50vh';
        document.body.style.overflow = 'hidden';
        scrollBottom();
    }
    function collapseDrawer() {
        if (!drawer) return;
        drawer.classList.add('translate-y-full');
        if (overlay) overlay.classList.add('hidden');
        if (inputBar) inputBar.classList.remove('hidden');
        isOpen = false;
        drawer.style.height = '50vh';
        if (isAddFriendMode) hideAddFriendFlow();
        document.body.style.overflow = '';
    }
    function scrollBottom() {
        if (chatMsgs) requestAnimationFrame(function(){ chatMsgs.scrollTop = chatMsgs.scrollHeight; });
    }

    /* Tap on collapsed bar → open drawer (same as Home) */
    if (bInput) bInput.addEventListener('focus', function(){ expandDrawer(); setTimeout(function(){ if(dInput) dInput.focus(); },320); });
    if (inputBar) inputBar.addEventListener('click', function(e){ if(!e.target.closest('button')) expandDrawer(); });

    if (overlay) overlay.addEventListener('click', collapseDrawer);

    window.addEventListener('beforeunload', function() { document.body.style.overflow = ''; });
    document.addEventListener('visibilitychange', function() {
        if (document.visibilityState === 'hidden') document.body.style.overflow = '';
    });

    /* ── Append ShAI message with optional thumbnail ── */
    function appendShAI(text, thumbUrls) {
        var container = document.querySelector('#chat-messages .p-4');
        if (!container) return;
        var thumbHtml = '';
        if (thumbUrls && thumbUrls.length) {
            thumbHtml = '<div class="flex gap-1.5 mt-2 flex-wrap">' +
                thumbUrls.slice(0, 4).map(function(t){
                    return '<img class="w-12 h-12 rounded-lg object-cover border border-gray-200" src="' + esc(t) + '" alt="" loading="lazy">';
                }).join('') + '</div>';
        }
        var row = document.createElement('div');
        row.className = 'flex items-start space-x-3 mb-4';
        row.innerHTML =
            '<div class="w-10 h-10 rounded-full overflow-hidden flex-shrink-0">' +
              '<img class="w-full h-full object-cover" src="' + esc(shaiAvSrc()) + '" alt="ShAI" data-shai-avatar onerror="this.style.display=\'none\'">' +
            '</div>' +
            '<div class="flex-1">' +
              '<div class="bg-gray-50 rounded-2xl rounded-tl-md p-3">' +
                '<p class="text-sm text-black break-words whitespace-pre-wrap">' + esc(text) + '</p>' +
                thumbHtml +
              '</div>' +
            '</div>';
        container.appendChild(row);
        scrollBottom();
    }

    /* Append user text bubble */
    function appendUser(text) {
        var container = document.querySelector('#chat-messages .p-4');
        if (!container) return;
        var row = document.createElement('div');
        row.className = 'flex justify-end mb-4';
        row.innerHTML = '<div class="bg-[#939BFB] rounded-2xl rounded-tr-md p-3 max-w-[80%]"><p class="text-sm text-white break-words whitespace-pre-wrap">' + esc(text) + '</p></div>';
        container.appendChild(row);
        scrollBottom();
    }

    /* ── Chat icon on product card ───────────────────── */
    function openProductChat(name, brand, price, imgSrc) {
        if (!isOpen) expandDrawer();
        setTimeout(function () {
            /* ShAI message only — with thumbnail — no outgoing user bubble */
            appendShAI(
                'Tell me more about the "' + name + '" by ' + brand + ' (' + price + '). Want styling tips, size help, or similar options?',
                imgSrc ? [imgSrc] : []
            );
        }, 260);
    }

    /* ── Drag to resize / swipe down to close (same as Home) ──────────────────────────────── */
    function onDragEnd() {
        if (!isDragging) return;
        isDragging = false;
        drawer.style.transition = '';
        var h = (drawer.getBoundingClientRect().height / window.innerHeight) * 100;
        if (h < CLOSE_THRESHOLD) {
            collapseDrawer();
        } else {
            currentHeight = Math.max(35, Math.min(90, h));
            drawer.style.height = currentHeight + 'vh';
        }
    }
    if (dragZone) {
        var dragStartY = 0, dragStartH = 0;
        dragZone.style.userSelect = 'none';
        dragZone.style.cursor = 'grab';
        dragZone.style.paddingTop = '14px';
        dragZone.style.paddingBottom = '14px';

        dragZone.addEventListener('touchstart', function(e) {
            isDragging = true;
            dragStartY = e.touches[0].clientY;
            dragStartH = drawer.getBoundingClientRect().height;
            drawer.style.transition = 'none';
        }, { passive: true });

        dragZone.addEventListener('touchmove', function(e) {
            if (!isDragging) return;
            e.preventDefault();
            var dy = e.touches[0].clientY - dragStartY;
            var bottomOffset = parseFloat(getComputedStyle(drawer).bottom) || 64;
            var maxDrawerH = window.innerHeight - bottomOffset - 80;
            var newH = Math.max(80, Math.min(maxDrawerH, dragStartH - dy));
            drawer.style.height = newH + 'px';
            currentHeight = (newH / window.innerHeight) * 100;
        }, { passive: false });

        dragZone.addEventListener('touchend', onDragEnd, { passive: true });
        dragZone.addEventListener('touchcancel', onDragEnd, { passive: true });

        dragZone.addEventListener('mousedown', function(e) {
            isDragging = true;
            dragStartY = e.clientY;
            dragStartH = drawer.getBoundingClientRect().height;
            drawer.style.transition = 'none';

            function onMouseMove(ev) {
                if (!isDragging) return;
                var dy = ev.clientY - dragStartY;
                var bottomOffset = parseFloat(getComputedStyle(drawer).bottom) || 64;
                var maxDrawerH = window.innerHeight - bottomOffset - 80;
                var newH = Math.max(80, Math.min(maxDrawerH, dragStartH - dy));
                drawer.style.height = newH + 'px';
                currentHeight = (newH / window.innerHeight) * 100;
            }
            function onMouseUp() {
                document.removeEventListener('mousemove', onMouseMove);
                document.removeEventListener('mouseup', onMouseUp);
                onDragEnd();
            }
            document.addEventListener('mousemove', onMouseMove);
            document.addEventListener('mouseup', onMouseUp);
        });
    }

    /* ── Auto-grow textarea helper ────────────────────── */
    function autoResize(ta) {
        if (!ta) return;
        ta.style.height = 'auto';
        var lh = parseFloat(getComputedStyle(ta).lineHeight) || 20;
        ta.style.height = Math.min(ta.scrollHeight, lh * 6) + 'px';
    }

    /* ── Drawer input sync / send ─────────────────────── */
    function syncDrawerInput() {
        var has = dInput && dInput.value.trim().length > 0;
        if (dSend)      { dSend.classList.toggle('hidden', !has); }
        if (dMic)       dMic.classList.toggle('hidden', has);
        if (dAddFriend) dAddFriend.classList.toggle('hidden', has);
        autoResize(dInput);
    }
    function sendDrawerMsg() {
        var txt = dInput ? dInput.value.trim() : '';
        if (!txt) return;
        appendUser(txt);
        dInput.value = ''; autoResize(dInput); syncDrawerInput();
        setTimeout(function(){ appendShAI("Thanks! I'm here to help — what would you like to know?"); }, 900);
    }
    if (dInput)  dInput.addEventListener('input', syncDrawerInput);
    if (dInput)  dInput.addEventListener('keydown', function(e){ if(e.key==='Enter'&&!e.shiftKey){ e.preventDefault(); sendDrawerMsg(); } });
    if (dSend)   dSend.addEventListener('click', sendDrawerMsg);

    /* ── Collapsed bar send ───────────────────────────── */
    function syncBarInput() {
        var has = bInput && bInput.value.trim().length > 0;
        if (bSend)      { bSend.classList.toggle('hidden', !has); }
        if (bMic)       bMic.classList.toggle('hidden', has);
        if (bAddFriend) bAddFriend.classList.toggle('hidden', has);
        autoResize(bInput);
    }
    function sendBarMsg() {
        var txt = bInput ? bInput.value.trim() : '';
        if (!txt) return;
        expandDrawer();
        setTimeout(function(){
            appendUser(txt);
            bInput.value = ''; autoResize(bInput); syncBarInput();
            setTimeout(function(){ appendShAI("Thanks! I'm here to help — what would you like to know?"); }, 900);
        }, 320);
    }
    if (bInput) bInput.addEventListener('input', syncBarInput);
    if (bInput) bInput.addEventListener('keydown', function(e){ if(e.key==='Enter'&&!e.shiftKey){ e.preventDefault(); sendBarMsg(); } });
    if (bSend)  bSend.addEventListener('click', sendBarMsg);

    /* ── System bubble helper ────────────────────────── */
    function renderSystemBubble(msg) {
        var container = document.querySelector('#chat-messages .p-4');
        if (!container) return;
        var el = document.createElement('div');
        el.className = 'flex justify-center mb-2';
        el.innerHTML = '<div class="text-xs text-gray-500 bg-gray-100 px-3 py-1 rounded-full">' + esc(msg) + '</div>';
        container.appendChild(el);
        scrollBottom();
    }

    /* ── Camera handler ──────────────────────────────── */
    function handleFileSelection(file) {
        var url = URL.createObjectURL(file);
        var container = document.querySelector('#chat-messages .p-4');
        if (!container) return;
        var bubble = document.createElement('div');
        bubble.className = 'flex justify-end mb-4';
        if (file.type.startsWith('image/')) {
            bubble.innerHTML = '<div class="rounded-2xl border border-[#939BFB] max-w-[60%] overflow-hidden shadow-sm"><img src="' + url + '" class="w-full h-auto" alt="Uploaded image"></div>';
        } else if (file.type.startsWith('video/')) {
            bubble.innerHTML = '<div class="rounded-2xl border border-[#939BFB] max-w-[60%] overflow-hidden shadow-sm relative"><video src="' + url + '" controls class="w-full h-auto"></video></div>';
        }
        container.appendChild(bubble);
        scrollBottom();
        setTimeout(function() {
            appendShAI(file.type.startsWith('video/')
                ? 'Great! I can analyze your video. Let me find products that match what I see.'
                : 'Perfect! I can see your image. Let me analyze it and find similar products for you.');
        }, 1500);
    }

    function handleCameraAccess() {
        var input = document.createElement('input');
        input.type = 'file';
        input.accept = 'image/*,video/*';
        input.onchange = function(e) {
            var file = e.target.files && e.target.files[0];
            if (file) handleFileSelection(file);
            input.value = '';
        };
        input.click();
    }

    function setupCameraButtons() {
        [bCam, dCam].forEach(function(btn) {
            if (!btn) return;
            btn.addEventListener('click', function(e) {
                e.preventDefault(); e.stopPropagation();
                if (isOpen) {
                    handleCameraAccess();
                } else {
                    expandDrawer();
                    setTimeout(handleCameraAccess, 300);
                }
            });
        });
    }
    setupCameraButtons();

    /* ── Voice recording ─────────────────────────────── */
    function removeTempRecordingBubble() {
        var t = document.getElementById('temp-recording');
        if (t) t.remove();
    }

    function renderAudioBubble(url) {
        var container = document.querySelector('#chat-messages .p-4');
        if (!container) return;
        var bubble = document.createElement('div');
        bubble.className = 'flex justify-end mb-2';
        bubble.innerHTML = '<div role="group" aria-label="Voice message from you" class="voice-message-bubble bg-[#939BFB] text-white rounded-full px-3 py-2 flex items-center gap-2 h-11 shadow-sm">' +
            '<button aria-label="Play voice message" class="play-btn flex-shrink-0 w-6 h-6 border border-white rounded-full flex items-center justify-center hover:bg-white/20 transition-all" onclick="window.toggleVoicePlayback(this,\'' + url + '\')">' +
            '<svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></button>' +
            '<div class="waveform flex-1 flex items-center justify-center gap-0.5 h-4 max-w-[120px]">' +
            [8,12,6,16,10,14,8,12,6,10].map(function(h,i){ return '<div class="wave-bar w-0.5 bg-white/90 rounded-full" style="height:' + h + 'px"></div>'; }).join('') +
            '</div>' +
            '<span class="duration-text text-white/90 text-xs font-medium flex-shrink-0">0:00</span>' +
            '<audio src="' + url + '" preload="auto" class="hidden"></audio></div>';
        container.appendChild(bubble);
        var audio = bubble.querySelector('audio');
        var durEl = bubble.querySelector('.duration-text');
        if (audio && durEl) {
            audio.addEventListener('loadedmetadata', function() {
                var d = Math.ceil(audio.duration);
                durEl.textContent = Math.floor(d/60) + ':' + String(d%60).padStart(2,'0');
            });
        }
        scrollBottom();
        setTimeout(function(){ appendShAI("Got your voice message! I'm on it — let me find the best options for you."); }, 800);
    }

    window.toggleVoicePlayback = function(button, audioUrl) {
        var container = button.closest('.voice-message-bubble');
        var audio = container.querySelector('audio');
        var playIcon = button.querySelector('svg');
        var durationText = container ? container.querySelector('.duration-text') : null;
        if (audio.paused) {
            audio.play();
            playIcon.innerHTML = '<path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>';
            audio.ontimeupdate = function() { if (durationText) { var r = Math.ceil(audio.duration - audio.currentTime); durationText.textContent = Math.floor(r/60) + ':' + String(r%60).padStart(2,'0'); } };
            audio.onended = function() { playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>'; if (durationText && !isNaN(audio.duration)) { var d = Math.ceil(audio.duration); durationText.textContent = Math.floor(d/60) + ':' + String(d%60).padStart(2,'0'); } };
        } else {
            audio.pause();
            playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
        }
    };

    function doRecord(stream, btn) {
        mediaStream = stream;
        mediaRecorder = new MediaRecorder(stream);
        isRecording = true;
        audioChunks = [];
        mediaRecorder.ondataavailable = function(ev) { if (ev.data.size > 0) audioChunks.push(ev.data); };
        mediaRecorder.start();
        if (btn) btn.classList.add('scale-110','ring-2','ring-[#939BFB]','ring-offset-2');
        var container = document.querySelector('#chat-messages .p-4');
        if (container) {
            var tmp = document.createElement('div');
            tmp.id = 'temp-recording';
            tmp.className = 'flex justify-end mb-2';
            tmp.innerHTML = '<div class="flex items-center bg-[#939BFB] text-white rounded-2xl px-3 py-2 max-w-[70%]"><svg class="w-4 h-4 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18.75a6 6 0 006-6v-1.5m-6 7.5a6 6 0 01-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 01-3-3V4.5a3 3 0 116 0v8.25a3 3 0 01-3 3z"/></svg><span class="text-xs">Recording... swipe left to cancel</span></div>';
            container.appendChild(tmp);
            scrollBottom();
        }
    }

    function startRecording(e) {
        e.preventDefault();
        removeTempRecordingBubble();
        if (!isOpen) { expandDrawer(); return; }
        if (micAccessDenied) { renderSystemBubble('Microphone access denied. Enable it in your browser settings.'); return; }
        startX = e.touches ? e.touches[0].clientX : e.clientX;
        var btn = e.currentTarget || e.target;
        /* Reuse the stream if already granted — no repeated permission prompts */
        if (mediaStream && mediaStream.active) {
            doRecord(mediaStream, btn);
        } else {
            navigator.mediaDevices.getUserMedia({ audio: true }).then(function(stream) {
                doRecord(stream, btn);
            }).catch(function(err) {
                removeTempRecordingBubble();
                if (err && (err.name === 'NotAllowedError' || err.name === 'SecurityError')) {
                    micAccessDenied = true;
                    renderSystemBubble('Microphone access denied. Enable it in your browser settings.');
                } else {
                    renderSystemBubble('Could not access microphone. Please try again.');
                }
            });
        }
    }

    function stopRecording(e) {
        e.preventDefault();
        if (!isRecording) return;
        isRecording = false;
        var btn = e.currentTarget || e.target;
        if (btn) btn.classList.remove('scale-110','ring-2','ring-[#939BFB]','ring-offset-2');
        removeTempRecordingBubble();
        if (mediaRecorder) {
            mediaRecorder.stop();
            mediaRecorder.onstop = function() {
                var blob = new Blob(audioChunks, { type: 'audio/webm' });
                renderAudioBubble(URL.createObjectURL(blob));
            };
        }
    }

    function cancelRecording(e) {
        if (!isRecording) return;
        isRecording = false;
        var btn = e.currentTarget || e.target;
        if (btn) btn.classList.remove('scale-110','ring-2','ring-[#939BFB]','ring-offset-2');
        removeTempRecordingBubble();
        if (mediaRecorder && mediaRecorder.state !== 'inactive') mediaRecorder.stop();
    }

    function handleSwipeCancel(e) {
        if (!isRecording || !e.touches || !e.touches.length) return;
        if (startX - e.touches[0].clientX > 30) cancelRecording.call(this, e);
    }

    function setupMicButtons() {
        [bMic, dMic].forEach(function(btn) {
            if (!btn) return;
            btn.addEventListener('mousedown',   startRecording);
            btn.addEventListener('touchstart',  startRecording, { passive: false });
            btn.addEventListener('mouseup',     stopRecording);
            btn.addEventListener('mouseleave',  cancelRecording);
            btn.addEventListener('touchend',    stopRecording);
            btn.addEventListener('touchcancel', cancelRecording);
            btn.addEventListener('touchmove',   handleSwipeCancel, { passive: true });
        });
    }
    setupMicButtons();

    /* ── Add Friend panel ────────────────────────────── */
    window.__addFriendContacts = window.__addFriendContacts || [
        { name: 'Alex Johnson',     phone: '+1 (555) 123-4567', goshopme: true,  avatar: 'https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/avatars/avatar-2.jpg' },
        { name: 'Maria Rodriguez',  phone: '+1 (555) 987-6543', goshopme: false },
        { name: 'David Kim',        phone: '+1 (555) 456-7890', goshopme: true,  avatar: 'https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/avatars/avatar-3.jpg' },
        { name: 'Sarah Thompson',   phone: '+1 (555) 234-5678', goshopme: false },
        { name: 'Emma Wilson',      phone: '+1 (555) 345-6789', goshopme: true,  avatar: 'https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/avatars/avatar-5.jpg' },
        { name: 'Michael Brown',    phone: '+1 (555) 678-9012', goshopme: false },
        { name: 'Jennifer Lee',     phone: '+1 (555) 789-0123', goshopme: true,  avatar: 'https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/avatars/avatar-6.jpg' },
        { name: 'Robert Davis',     phone: '+1 (555) 890-1234', goshopme: false },
        { name: 'Lisa Chen',        phone: '+1 (555) 111-2222', goshopme: true }
    ];

    function getInitials(name) {
        var parts = (name || '').trim().split(/\s+/);
        return parts.length >= 2 ? (parts[0][0] + parts[1][0]).toUpperCase() : (parts[0] ? parts[0].slice(0,2) : '??').toUpperCase();
    }

    function renderContacts(list) {
        if (!contactsContainer) return;
        var contacts = list || [];
        contactsContainer.innerHTML = contacts.map(function(c, i) {
            var initials = getInitials(c.name);
            var avatarHtml = (c.goshopme && c.avatar)
                ? '<div class="w-8 h-8 rounded-full overflow-hidden flex-shrink-0"><img src="' + esc(c.avatar) + '" alt="' + esc(c.name) + '" class="w-full h-full object-cover"></div>'
                : '<div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0"><span class="text-gray-600 font-medium text-xs">' + initials + '</span></div>';
            var btnClass = c.goshopme
                ? 'contact-action-btn bg-[#939BFB] text-white px-2 py-1 rounded-full text-xs font-medium'
                : 'contact-action-btn bg-white text-[#939BFB] px-2 py-1 rounded-full text-xs font-medium border border-[#939BFB]';
            var btnLabel = c.goshopme ? 'Add' : 'Invite';
            return '<div class="contact-row flex items-center gap-2 p-2 bg-gray-50 rounded-xl" data-idx="' + i + '" data-name="' + esc(c.name) + '" data-goshopme="' + (c.goshopme ? 'true' : 'false') + '">' + avatarHtml + '<div class="flex-1"><p class="font-medium text-sm text-black">' + esc(c.name) + '</p><p class="text-xs text-gray-500">' + esc(c.phone) + '</p></div><button type="button" class="' + btnClass + '" data-action="' + (c.goshopme ? 'add' : 'invite') + '">' + btnLabel + '</button></div>';
        }).join('');
    }

    function handleContactAction(e) {
        var btn = e.target.closest('.contact-action-btn');
        if (!btn || !contactsContainer || !contactsContainer.contains(btn)) return;
        e.preventDefault();
        e.stopPropagation();
        var row = btn.closest('.contact-row');
        if (!row) return;
        var name = row.getAttribute('data-name') || '';
        var firstName = name.split(' ')[0] || 'Contact';
        var action = btn.getAttribute('data-action') || (btn.textContent.trim() === 'Add' ? 'add' : 'invite');
        if (action === 'add') {
            var note = document.createElement('div');
            note.className = 'flex justify-center mb-4';
            note.innerHTML = '<div class="bg-green-100 text-green-800 px-4 py-2 rounded-full text-xs font-medium">' + esc(firstName) + ' has been added to chat</div>';
            var msgContainer = document.querySelector('#chat-messages .p-4');
            if (msgContainer) {
                msgContainer.appendChild(note);
                if (typeof scrollBottom === 'function') scrollBottom();
            }
            hideAddFriendFlow();
        } else {
            var shareData = { title: 'Join me on GoShopMe', text: "Hey! I'm using GoShopMe. It's faster, smarter and effortless - join me", url: 'https://app.goshopme.ai' };
            if (navigator.share) {
                navigator.share(shareData).catch(function() {
                    if (navigator.clipboard) navigator.clipboard.writeText(shareData.text + ' ' + shareData.url);
                });
            } else if (navigator.clipboard) {
                navigator.clipboard.writeText(shareData.text + ' ' + shareData.url);
                if (typeof renderSystemBubble === 'function') renderSystemBubble('Invitation link copied to clipboard!');
                else if (typeof showToast === 'function') showToast('Invitation link copied to clipboard!');
                else alert('Invitation link copied to clipboard!');
            }
        }
    }
    if (contactsContainer) contactsContainer.addEventListener('click', handleContactAction);

    function filterContacts(query) {
        var q = (query || '').toLowerCase();
        var all = window.__addFriendContacts || [];
        renderContacts(q ? all.filter(function(c){ return (c.name||'').toLowerCase().includes(q); }) : all);
    }

    function showAddFriendFlow() {
        isAddFriendMode = true;
        if (chatContent)     chatContent.classList.add('hidden');
        if (addFriendContent) addFriendContent.classList.remove('hidden');
        if (backBtn)         backBtn.classList.remove('hidden');
        if (headerTitle)     headerTitle.textContent = 'Add Friend';
        if (headerSubtitle)  headerSubtitle.textContent = 'Choose contacts to add';
        renderContacts(window.__addFriendContacts);
    }

    function hideAddFriendFlow() {
        isAddFriendMode = false;
        if (chatContent)     chatContent.classList.remove('hidden');
        if (addFriendContent) addFriendContent.classList.add('hidden');
        if (backBtn)         backBtn.classList.add('hidden');
        if (headerTitle)     headerTitle.textContent = 'ShAI';
        if (headerSubtitle)  headerSubtitle.textContent = 'Your shopping assistant';
        if (contactSearch)   { contactSearch.value = ''; filterContacts(''); }
    }

    if (backBtn) backBtn.addEventListener('click', hideAddFriendFlow);
    if (contactSearch) contactSearch.addEventListener('input', function(){ filterContacts(this.value); });

    function setupAddFriendButtons() {
        [bAddFriend, dAddFriend].forEach(function(btn) {
            if (!btn) return;
            btn.addEventListener('click', function(e) {
                e.preventDefault(); e.stopPropagation();
                if (!isOpen) {
                    expandDrawer();
                    setTimeout(showAddFriendFlow, 320);
                } else {
                    showAddFriendFlow();
                }
            });
        });
    }
    setupAddFriendButtons();

    /* ── Brand drop ───────────────────────────────────── */
    var brandBtn = document.getElementById('brand-drop-btn');
    if (brandBtn) brandBtn.addEventListener('click', function(){
        window.location.href = 'Brand_Products.html?brand=' + encodeURIComponent('Saint Laurent');
    });

    /* ── Wishlist state ──────────────────────────────── */
    var wishlisted = new Set();
    function toggleWishlist(btn) {
        var pid = btn.dataset.pid || '';
        var svg = btn.querySelector('svg');
        if (wishlisted.has(pid)) {
            wishlisted.delete(pid);
            if (svg) { svg.style.fill='none'; svg.style.stroke='white'; }
        } else {
            wishlisted.add(pid);
            if (svg) { svg.style.fill='#939BFB'; svg.style.stroke='#939BFB'; }
        }
    }

    /* ── Global click delegation ─────────────────────── */
    document.addEventListener('click', function(e) {

        /* Wishlist */
        var wl = e.target.closest('.wishlist-btn');
        if (wl) { e.stopPropagation(); toggleWishlist(wl); return; }

        /* Share */
        var sh = e.target.closest('.share-product-btn');
        if (sh) {
            e.stopPropagation();
            var c = sh.closest('.product-card');
            if (c) {
                var n = c.dataset.name||'', br = c.dataset.brand||'', pr = c.dataset.price||'';
                var txt = 'Check out ' + n + (br?' by '+br:'') + (pr?' for '+pr:'') + ' on GoShopMe!';
                if (navigator.share) navigator.share({ title:n, text:txt, url:location.href }).catch(function(){});
                else if (navigator.clipboard) navigator.clipboard.writeText(txt).then(function(){ alert('Link copied!'); }).catch(function(){});
                else alert(txt);
            }
            return;
        }

        /* Chat icon on card */
        var cb = e.target.closest('.chat-trigger');
        if (cb) {
            e.stopPropagation();
            var c = cb.closest('.product-card');
            if (c) {
                var imgEl = c.querySelector('img');
                openProductChat(c.dataset.name||'', c.dataset.brand||'', c.dataset.price||'', imgEl ? imgEl.src : (c.dataset.img||''));
            }
            return;
        }

        /* Creator link */
        var cl = e.target.closest('.creator-link');
        if (cl) {
            e.stopPropagation();
            var creator = cl.dataset.creator || '';
            if (!isOpen) expandDrawer();
            setTimeout(function(){
                appendShAI('Want to see more from @' + creator + '? I can show their full collection and help you create similar looks!');
            }, 250);
            return;
        }

        /* Product tile → detail page */
        var card = e.target.closest('.product-card');
        if (card && !e.target.closest('button')) {
            var id = card.dataset.pid||'', name = card.dataset.name||'', brand = card.dataset.brand||'', price = card.dataset.price||'';
            var imgEl = card.querySelector('img'), img = imgEl ? imgEl.src : (card.dataset.img||'');
            var q = 'id='+encodeURIComponent(id)+'&name='+encodeURIComponent(name)+'&brand='+encodeURIComponent(brand)+'&price='+encodeURIComponent(price)+'&from=trending'+(img?'&image='+encodeURIComponent(img):'');
            try { sessionStorage.setItem('__productNavData', JSON.stringify({id,name,brand,price,image:img})); } catch(err){}
            location.href = 'Product_details_page.html?' + q;
        }
    });

})();
</script>

</body>
</html>



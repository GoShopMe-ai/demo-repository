<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="stylesheet" href="css/mobile-optimization.css">
    <title>Account Not Found â€“ GoShopMe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'shine-primary': '#939BFB',
                        'shine-accent': '#F96226'
                    }
                }
            }
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Karla:wght@400;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        ::-webkit-scrollbar { display: none; }
        html, body { margin: 0; padding: 0; }
        #auth-screen { padding-top: 1rem; }
        #auth-logo h2 { margin-top: 0; margin-bottom: 0.5rem; }
        * {
            font-family: 'DM Sans', 'Karla', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
        }
        .dm-sans { font-family: 'DM Sans', 'Karla', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif; }
        .poppins { font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; }
    </style>
</head>
<body class="bg-[#F6F6F6] min-h-screen">
    <div id="auth-screen" class="relative w-full max-w-[390px] mx-auto min-h-screen bg-white overflow-y-auto shadow-2xl">
        <div class="relative flex flex-col items-center px-6 pt-10 pb-8">
            <!-- Back Button -->
            <div class="absolute top-6 left-6">
                <a href="SignIn_Screen.html" class="text-gray-600 hover:text-gray-800 transition-colors" aria-label="Go back to sign in">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
                    </svg>
                </a>
            </div>
            <!-- Logo -->
            <div class="w-full text-center leading-none mb-8">
                <img class="w-full max-w-[390px] h-auto mx-auto block align-top" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe/main/html_designs/GoShopMe%20logo.svg" data-logo alt="GoShopMe logo" title="GoShopMe logo">
            </div>
            <!-- Centered content -->
            <div class="w-full flex flex-col items-center">
            <!-- Error Message Section -->
            <div id="error-message" class="w-full text-center mb-8">
                <div class="mb-6 flex justify-center">
                    <span class="text-shine-accent">
                        <svg class="w-14 h-14" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" />
                        </svg>
                    </span>
                </div>
                <h2 class="poppins text-xl font-bold text-gray-800 mb-3">Account Not Found</h2>
                <p class="dm-sans text-gray-600 mb-2">We couldn't find an account with that email.</p>
                <p class="dm-sans text-gray-500 text-sm">Please double-check the spelling and try again. If you believe this is an error, feel free to contact our support team for assistance.</p>
            </div>
            <!-- Email Form -->
            <form id="reset-password-form" class="w-full space-y-6 mb-6">
                <div class="space-y-2">
                    <label for="email" class="block dm-sans text-sm text-gray-600">Email address</label>
                    <input type="email" id="email" placeholder="Enter your email" required
                        class="w-full px-4 py-3.5 rounded-xl border border-gray-200 focus:border-shine-primary focus:ring-2 focus:ring-shine-primary/20 outline-none transition-colors dm-sans">
                </div>
                <button type="submit" class="w-3/4 mx-auto block py-3 bg-shine-primary text-white rounded-full font-medium text-sm shadow-sm dm-sans hover:opacity-90 transition-opacity">
                    Reset Password
                </button>
            </form>
            <!-- Support Link -->
            <div class="flex items-center justify-center space-x-2">
                <span class="dm-sans text-gray-600">Need help?</span>
                <a href="mailto:support@goshopme.com" class="poppins text-shine-primary font-semibold hover:underline cursor-pointer">Contact Support</a>
            </div>
            </div>
        </div>
    </div>
    <script>
        (function() {
            var params = new URLSearchParams(window.location.search);
            var emailParam = params.get('email');
            if (emailParam) {
                var input = document.getElementById('email');
                if (input) input.value = emailParam;
            }
        })();

        document.getElementById('reset-password-form').addEventListener('submit', function(e) {
            e.preventDefault();
            var email = document.getElementById('email').value.trim().toLowerCase();
            var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('Please enter a valid email address.');
                return;
            }
            if (typeof window.GoShopMeAuthAPI !== 'undefined' && window.GoShopMeAuthAPI.requestPasswordReset) {
                window.GoShopMeAuthAPI.requestPasswordReset(email).then(function(result) {
                    if (result && result.sent) {
                        window.location.href = 'Forgotten_Pass_Email_Sent.html?email=' + encodeURIComponent(email);
                    } else {
                        alert('We couldn\'t find an account with that email.');
                    }
                }).catch(function() {
                    var isRegistered = isRegisteredEmail(email);
                    if (isRegistered) {
                        window.location.href = 'Forgotten_Pass_Email_Sent.html?email=' + encodeURIComponent(email);
                    } else {
                        alert('We couldn\'t find an account with that email.');
                    }
                });
            } else {
                var isRegistered = isRegisteredEmail(email);
                if (isRegistered) {
                    window.location.href = 'Forgotten_Pass_Email_Sent.html?email=' + encodeURIComponent(email);
                } else {
                    alert('We couldn\'t find an account with that email.');
                }
            }
        });

        function isRegisteredEmail(email) {
            var demoEmails = ['sarah.j@email.com', 'demo@example.com', 'user@example.com'];
            if (demoEmails.indexOf(email) >= 0) return true;
            try {
                var stored = localStorage.getItem('__registeredEmails');
                if (stored) {
                    var list = JSON.parse(stored);
                    return Array.isArray(list) && list.indexOf(email) >= 0;
                }
            } catch (err) {}
            return false;
        }
    </script>
</body>
</html>



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="stylesheet" href="css/mobile-optimization.css">
    <title>Reset link sent – GoShopMe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'shine-primary': '#939BFB',
                        'shine-accent': '#F96226'
                    }
                }
            }
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Karla:wght@400;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        ::-webkit-scrollbar { display: none; }
        html, body { margin: 0; padding: 0; }
        #auth-screen { padding-top: 1rem; }
        #auth-logo h2 { margin-top: 0; margin-bottom: 0.5rem; }
        * {
            font-family: 'DM Sans', 'Karla', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
        }
        .dm-sans { font-family: 'DM Sans', 'Karla', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif; }
        .poppins { font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; }
    </style>
</head>
<body class="bg-[#F6F6F6] min-h-screen">
    <div id="auth-screen" class="relative w-full max-w-[390px] mx-auto min-h-screen bg-white overflow-y-auto shadow-2xl">
        <div class="relative flex flex-col items-center px-6 pt-10 pb-8">
            <!-- Back Button -->
            <div class="absolute top-6 left-6">
                <a href="Forgotten_Password_Main.html" class="text-gray-600 hover:text-gray-800 transition-colors" aria-label="Go back">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
                    </svg>
                </a>
            </div>

            <!-- Logo -->
            <div class="w-full text-center leading-none mb-8">
                <img class="w-full max-w-[390px] h-auto mx-auto block align-top" src="GoShopMe logo.svg" data-logo alt="GoShopMe logo" title="GoShopMe logo">
            </div>
            <!-- Centered content -->
            <div class="w-full flex flex-col items-center">
            <!-- Message Section -->
            <div id="auth-logo" class="w-full text-center mb-8 leading-none">
                <h2 class="poppins text-xl font-bold text-gray-800 mb-2">We've sent a reset link to your email.</h2>
                <p class="dm-sans text-gray-600">No worries — we'll help you reset it in a few seconds.</p>
            </div>

            <!-- Resend Email Section -->
            <div id="resend-section" class="w-full text-center space-y-4 mb-8">
                <p class="dm-sans text-gray-500 text-sm">If you haven't received an e-mail please check in your Spam folder</p>
                <div class="flex flex-col items-center space-y-2">
                    <p class="dm-sans text-gray-600">Resend email in: <span id="timer" class="text-shine-primary font-semibold">60</span>s</p>
                    <button id="resend-button" class="dm-sans text-shine-primary font-semibold disabled:text-gray-400" disabled>Resend email</button>
                </div>
            </div>

            <!-- Sign In Link -->
            <div class="flex items-center justify-center space-x-2">
                <span class="dm-sans text-gray-600">Remember your password?</span>
                <a href="SignIn_Screen.html" class="poppins text-shine-primary font-semibold hover:underline cursor-pointer">Sign In</a>
            </div>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div id="toast-success" class="hidden fixed bottom-20 left-1/2 -translate-x-1/2 bg-green-50 text-green-700 px-6 py-3 rounded-full shadow-lg dm-sans text-sm z-50">
            <div class="flex items-center space-x-2">
                <svg class="w-5 h-5 flex-shrink-0 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <span>We've sent a reset link to your email.</span>
            </div>
        </div>
        <div id="toast-error" class="hidden fixed bottom-20 left-1/2 -translate-x-1/2 bg-red-50 text-red-700 px-6 py-3 rounded-full shadow-lg dm-sans text-sm z-50">
            <div class="flex items-center space-x-2">
                <svg class="w-5 h-5 flex-shrink-0 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>
                <span>We couldn't find an account with that email.</span>
            </div>
        </div>

    </div>

    <script>
        (function() {
            var timeLeft = 60;
            var timerDisplay = document.getElementById('timer');
            var resendButton = document.getElementById('resend-button');
            var timerParagraph = timerDisplay && timerDisplay.parentElement;

            function runTimer() {
                timeLeft = 60;
                if (timerDisplay) timerDisplay.textContent = timeLeft;
                if (timerParagraph) timerParagraph.classList.remove('hidden');
                if (resendButton) resendButton.disabled = true;

                var countdown = setInterval(function() {
                    timeLeft--;
                    if (timerDisplay) timerDisplay.textContent = timeLeft;
                    if (timeLeft <= 0) {
                        clearInterval(countdown);
                        if (resendButton) resendButton.disabled = false;
                        if (timerParagraph) timerParagraph.classList.add('hidden');
                    }
                }, 1000);
            }

            if (resendButton) {
                resendButton.addEventListener('click', function() {
                    if (!this.disabled) {
                        var params = new URLSearchParams(window.location.search);
                        var email = params.get('email');
                        if (typeof window.GoShopMeAuthAPI !== 'undefined' && window.GoShopMeAuthAPI.resendPasswordReset && email) {
                            window.GoShopMeAuthAPI.resendPasswordReset(email);
                        }
                        runTimer();
                    }
                });
            }
            runTimer();
        })();
    </script>
    <script>
    // API readiness: prefill from window.__EMAIL_SENT_DATA__
    (function() {
        window.getEmailSentData = function() {
            var p = new URLSearchParams(window.location.search);
            return { email: p.get('email') || '' };
        };
        document.addEventListener('DOMContentLoaded', function() {
            if (window.__EMAIL_SENT_DATA__) { /* optional prefill */ }
        });
    })();
    </script>
</body>
</html>



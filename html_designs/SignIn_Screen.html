<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="stylesheet" href="css/mobile-optimization.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'shine-primary': '#939BFB',
                        'shine-accent': '#F96226'
                    }
                }
            }
        }
    </script>
    <script src="https://unpkg.com/heroicons@2.0.16/24/outline/index.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Karla:wght@400;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for social auth icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        window.FontAwesomeConfig = {
            autoReplaceSvg: 'nest'
        };
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="css/chat-drawer-drag.css">

    
    <style>
        
/* ---- MOBILE FULL-WIDTH OVERRIDE (match Home) ---- */
@media screen and (max-width: 768px) {
  #app-shell, #main-content, #auth-screen, #welcome_screen, #quiz-screen, #onboarding-screen,
  #bottom-nav, #bottom-navigation, #header, #app-header,
  #chat-drawer, #chat-input-bar, #shai-chat-drawer, #return-chat-drawer, #return-chat-input-bar, #chat-input-collapsed,
  #shai-chat-drawer-wrapper, #chat-drawer-wrapper,
  body > div, body > main {
    max-width: 100vw !important;
    width: 100% !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    box-shadow: none !important;
    left: 0 !important;
    right: 0 !important;
    transform: none !important;
  }
  [class*="left-1/2"][class*="-translate-x-1/2"]:not([class*="rounded-full"]) {
    left: 0 !important;
    right: 0 !important;
    max-width: 100vw !important;
    width: 100% !important;
    transform: none !important;
  }
  #chat-drawer.translate-y-full, #shai-chat-drawer.translate-y-full, #return-chat-drawer.translate-y-full {
    transform: translateY(100%) !important;
  }
  #bottom-nav > div, #bottom-navigation > div, nav#bottom-nav > div, nav#bottom-navigation > div {
    padding-top: 2px !important;
    padding-bottom: 24px !important;
  }
}

::-webkit-scrollbar { display: none;}
        html, body { margin: 0; padding: 0; }
        #auth-screen { padding-top: 1rem; }
        * { 
            font-family: 'DM Sans', 
                         'Karla',
                         -apple-system,
                         BlinkMacSystemFont,
                         'Segoe UI',
                         Roboto,
                         'Helvetica Neue',
                         Arial,
                         'Noto Sans',
                         sans-serif; 
        }

        .dm-sans { 
            font-family: 'DM Sans', 
                         'Karla',
                         -apple-system,
                         BlinkMacSystemFont,
                         'Segoe UI',
                         Roboto,
                         'Helvetica Neue',
                         Arial,
                         'Noto Sans',
                         sans-serif; 
        }

        .poppins { 
            font-family: 'Poppins',
                         -apple-system,
                         BlinkMacSystemFont,
                         'Segoe UI',
                         Roboto,
                         'Helvetica Neue',
                         Arial,
                         sans-serif; 
        }
        .input-error { border-color: #EF4444 !important; }
        .input-error:focus { --tw-ring-color: #EF4444 !important; }
        .error-msg { color: #EF4444; font-size: 12px; margin-top: 4px; }
        #auth-logo h2 { margin-top: 0; margin-bottom: 0.5rem; }
    </style>
</head>
<body class="bg-[#F6F6F6]">
    <div id="auth-screen" class="relative w-full max-w-[390px] mx-auto min-h-screen max-h-screen bg-white flex flex-col overflow-y-auto">
      <!-- Back Button -->
      <div class="absolute top-6 left-6 z-10">
        <a href="Welcome_Screen.html" class="text-gray-600 hover:opacity-70 transition-opacity" aria-label="Go back">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
          </svg>
        </a>
      </div>
      <!-- Main Content: logo + Welcome in same flow to eliminate gap -->
      <div class="relative flex flex-col items-center px-6 pt-10 pb-8 flex-shrink-0">
        <!-- Logo -->
        <div class="w-full text-center leading-none mb-8">
          <img class="w-full max-w-[390px] h-auto mx-auto block align-top" src="https://raw.githubusercontent.com/nora-todorova/GoShopMe-assets/main/assets/GoShopMe%20logo.svg" data-logo alt="GoShopMe logo" title="GoShopMe logo">
        </div>
        <!-- Centered content: Welcome, buttons, form -->
        <div class="w-full flex flex-col items-center">
        <!-- Welcome -->
        <div id="auth-logo" class="w-full text-center mb-4 leading-none">
          <h2 class="text-lg font-semibold poppins text-gray-900 mb-2">Welcome back!</h2>
          <p class="text-gray-500 text-base dm-sans">Sign in to enjoy effortless shopping</p>
        </div>

        <!-- Auth Options -->
        <div id="social-auth" class="w-full space-y-2 mb-2"><button type="button" class="w-full flex items-center justify-center space-x-2 py-2.5 px-3 rounded-full border-2 border-[#939BFB]/30 bg-white hover:bg-[#939BFB]/10 transition-colors"><i class="fab fa-google text-base text-gray-700"></i><span class="text-gray-900 font-medium text-xs dm-sans">Continue with Google</span></button><button type="button" class="w-full flex items-center justify-center space-x-2 py-2.5 px-3 rounded-full border-2 border-[#939BFB]/30 bg-white hover:bg-[#939BFB]/10 transition-colors"><i class="fab fa-instagram text-base text-gray-700"></i><span class="text-gray-900 font-medium text-xs dm-sans">Continue with Instagram</span></button><button type="button" class="w-full flex items-center justify-center space-x-2 py-2.5 px-3 rounded-full border-2 border-[#939BFB]/30 bg-white hover:bg-[#939BFB]/10 transition-colors"><i class="fab fa-tiktok text-base text-gray-700"></i><span class="text-gray-900 font-medium text-xs dm-sans">Continue with TikTok</span>        </button></div>

        <!-- Divider -->
        <div class="w-full flex items-center justify-center space-x-4 mb-2">
          <div class="flex-1 h-px bg-gray-200"></div><span class="text-gray-500 text-sm dm-sans">or</span>
          <div class="flex-1 h-px bg-gray-200"></div>
        </div><!-- Email Form -->
        <form id="email-auth" class="w-full space-y-4 mb-2">
  <div class="space-y-2"><label for="email" class="block text-xs text-gray-600 font-medium dm-sans">Email</label><input type="text" id="email" inputmode="email" placeholder="Enter your email" class="w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-[#939BFB] focus:ring-2 focus:ring-[#939BFB]/20 outline-none transition-all text-sm bg-gray-50 dm-sans" autocomplete="email">
    <span id="email-error" class="error-msg dm-sans hidden" role="alert"></span>
  </div>
  <div class="space-y-2"><label for="password" class="block text-xs text-gray-600 font-medium dm-sans">Password</label>
    <div class="relative"><input type="password" id="password" placeholder="Enter your password" class="w-full px-4 py-3 pr-12 rounded-xl border border-gray-200 focus:border-[#939BFB] focus:ring-2 focus:ring-[#939BFB]/20 outline-none transition-all text-sm bg-gray-50 dm-sans" required><button type="button" onclick="togglePassword()" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors">
      <svg id="toggleIcon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"/>
        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
      </svg>
    </button></div>
    <span id="password-error" class="error-msg dm-sans hidden" role="alert"></span>
  </div>
  <div class="flex justify-end"><a href="Forgotten_Password_Main.html" class="text-xs text-[#939BFB] hover:underline font-medium dm-sans">Forgot Password?</a></div>
  <div class="flex justify-center"><button type="submit" class="w-4/5 bg-[#939BFB] text-white font-medium py-3 rounded-full transition-all text-sm hover:bg-[#939BFB]/90 dm-sans">Sign In</button></div>
</form>

        <!-- Sign Up Link -->
        <div class="flex items-center justify-center space-x-2 pb-8"><span class="text-gray-500 text-sm dm-sans">Don't have an account?</span><a href="SignUp_Screen.html" class="text-[#939BFB] font-medium hover:underline text-sm dm-sans">Sign Up</a></div>
        </div>
      </div>
    </div>
    <script>
      function togglePassword()
      {
        const passwordInput = document.getElementById('password');
        const toggleIcon = document.getElementById('toggleIcon');

        if (passwordInput.type === 'password')
        {
          passwordInput.type = 'text';
          toggleIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 11-4.243-4.243m4.242 4.242L9.88 9.88"/>';
        }
        else
        {
          passwordInput.type = 'password';
          toggleIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>';
        }
      }

      // Sign In: email must be valid format (client-side). Matching email to a user in the
      // database is done on the server; password is validated against stored hash on the server.
      var emailFormatRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

      function showFieldError(inputId, errorId, msg) {
        var input = inputId ? document.getElementById(inputId) : null;
        var err = document.getElementById(errorId);
        if (msg) {
          if (input) input.classList.add('input-error');
          if (err) { err.textContent = msg; err.classList.remove('hidden'); }
        } else {
          if (input) input.classList.remove('input-error');
          if (err) { err.textContent = ''; err.classList.add('hidden'); }
        }
      }
      function validateSignInForm() {
        var emailInput = document.getElementById('email');
        var passwordInput = document.getElementById('password');
        showFieldError('email', 'email-error', '');
        showFieldError('password', 'password-error', '');

        var email = (emailInput && emailInput.value) ? emailInput.value.trim() : '';
        if (!email) {
          showFieldError('email', 'email-error', 'Please enter your email address');
          return false;
        }
        if (!emailFormatRegex.test(email)) {
          showFieldError('email', 'email-error', 'Please enter a valid email address');
          return false;
        }

        var password = (passwordInput && passwordInput.value) ? passwordInput.value.trim() : '';
        if (!password) {
          showFieldError('password', 'password-error', 'Please enter your password');
          return false;
        }
        if (/[^\x20-\x7E]/.test(password)) {
          showFieldError('password', 'password-error', 'Password must contain only Latin letters, numbers and symbols');
          return false;
        }

        return true;
      }

      document.getElementById('email').addEventListener('input', function() { showFieldError('email', 'email-error', ''); });
      document.getElementById('password').addEventListener('input', function() { showFieldError('password', 'password-error', ''); });
      document.getElementById('email-auth').addEventListener('submit', function(e) {
        e.preventDefault();
        if (!validateSignInForm()) {
          return;
        }
        var email = document.getElementById('email').value.trim().toLowerCase();
        var password = document.getElementById('password').value.trim();
        if (!validateCredentials(email, password)) {
          showFieldError('email', 'email-error', 'Invalid email or password');
          showFieldError('password', 'password-error', 'Invalid email or password');
          return;
        }
        window.location.href = 'Home.html';
      });

      /**
       * Validates that email and password match an existing user.
       * Replace with API call when backend is ready (e.g. await api.signIn(email, password)).
       */
      function validateCredentials(email, password) {
        var demoUsers = [
          { email: 'sarah.j@email.com', password: 'Password123!' },
          { email: 'demo@example.com', password: 'Demo123!' },
          { email: 'user@example.com', password: 'User123!' }
        ];
        for (var i = 0; i < demoUsers.length; i++) {
          if (demoUsers[i].email === email && demoUsers[i].password === password) {
            return true;
          }
        }
        try {
          var stored = localStorage.getItem('__registeredUsers');
          if (stored) {
            var users = JSON.parse(stored);
            if (Array.isArray(users)) {
              for (var j = 0; j < users.length; j++) {
                if (users[j].email === email && users[j].password === password) {
                  return true;
                }
              }
            }
          }
        } catch (err) {}
        return false;
      }
    </script>
  

</body></html>



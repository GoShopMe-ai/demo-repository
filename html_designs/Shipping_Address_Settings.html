<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="stylesheet" href="css/mobile-optimization.css">
    <title>My Addresses â€“ GoShopMe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: { 'shine-primary': '#939BFB', 'shine-accent': '#F96226' }
          }
        }
      }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Karla:wght@400;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
      ::-webkit-scrollbar { display: none; }
      * { font-family: 'DM Sans', 'Karla', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif; }
      .dm-sans { font-family: 'DM Sans', 'Karla', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif; }
      .poppins { font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; }
      input[type="radio"] {
        appearance: none;
        -webkit-appearance: none;
        width: 1.25rem;
        height: 1.25rem;
        border: 2px solid #d1d5db;
        border-radius: 50%;
        outline: none;
        cursor: pointer;
        position: relative;
      }
      input[type="radio"]:checked {
        border-color: #939BFB;
        background-color: #939BFB;
      }
      input[type="radio"]:checked::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 0.5rem;
        height: 0.5rem;
        border-radius: 50%;
        background-color: white;
      }
      .bottom-nav-btn { display: flex; flex-direction: column; align-items: center; color: #6B7280; transition: color 0.2s ease-in-out; min-width: 60px; }
      .bottom-nav-btn:hover, .bottom-nav-btn.active { color: #939BFB; }
      .bottom-nav-btn:hover svg, .bottom-nav-btn:hover span, .bottom-nav-btn.active svg, .bottom-nav-btn.active span { color: #939BFB; }
      .bottom-nav-btn svg { width: 20px; height: 20px; stroke-width: 1.5; margin-bottom: 4px; }
      #cart-indicator, #notif-indicator { min-width: 18px; min-height: 18px; padding: 0 5px; display: flex; align-items: center; justify-content: center; }
      #cart-indicator.hidden, #notif-indicator.hidden { display: none !important; }
      #cart-indicator.badge-numeric, #notif-indicator.badge-numeric { min-width: 18px; padding: 0 5px; }
      .header-icon-btn { transition: transform 0.2s ease, color 0.2s ease; }
      .header-icon-btn:hover { transform: translateY(-2px); }
    </style>
    <script>
    var BADGE_KEYS = { notif: 'goshopme_notif_count', cart: 'goshopme_cart_count' };
    var cartCountValue = 0, notifCountValue = 0;
    function getBadgeElements() { return { cartIndicator: document.getElementById('cart-indicator'), cartCount: document.getElementById('cart-count'), notifIndicator: document.getElementById('notif-indicator'), notifCount: document.getElementById('notif-count') }; }
    function updateCartBadge() { var el = getBadgeElements(); if (el.cartIndicator && el.cartCount) { var s = cartCountValue > 0; el.cartIndicator.classList.toggle('hidden', !s); el.cartIndicator.classList.toggle('flex', s); el.cartCount.textContent = s ? (cartCountValue > 99 ? '99+' : cartCountValue) : ''; } try { localStorage.setItem(BADGE_KEYS.cart, String(cartCountValue)); } catch (e) {} }
    function updateNotifBadge() { var el = getBadgeElements(); if (el.notifIndicator && el.notifCount) { var s = notifCountValue > 0; el.notifIndicator.classList.toggle('hidden', !s); el.notifIndicator.classList.toggle('flex', s); el.notifCount.textContent = s ? (notifCountValue > 99 ? '99+' : notifCountValue) : ''; } try { localStorage.setItem(BADGE_KEYS.notif, String(notifCountValue)); } catch (e) {} }
    document.addEventListener('DOMContentLoaded', function() { try { notifCountValue = parseInt(localStorage.getItem(BADGE_KEYS.notif) || '0', 10); cartCountValue = parseInt(localStorage.getItem(BADGE_KEYS.cart) || '0', 10); } catch (e) {} updateCartBadge(); updateNotifBadge(); });
    </script>
  </head>
  <body class="bg-[#F6F6F6] dm-sans">
<div class="w-full max-w-[390px] mx-auto min-h-screen bg-white shadow-2xl relative">
    <div id="header" class="fixed top-0 left-1/2 -translate-x-1/2 w-full max-w-[390px] z-50 bg-white border-b border-gray-100 p-4">
      <div class="relative flex items-center justify-between">
        <a id="shipping-back-link" href="User_Profile_Free_Plan.html" class="header-icon-btn relative z-10 w-10 h-10 flex items-center justify-center text-gray-600 hover:text-gray-800 p-2" aria-label="Back to profile">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5" class="w-5 h-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"></path>
          </svg>
        </a>
        <h1 class="absolute left-0 right-0 text-center text-lg poppins font-semibold text-gray-900 pointer-events-none">My Addresses</h1>
        <div class="relative z-10 flex items-center gap-2">
          <a href="Notifications_Screen.html?from=shipping" id="notif-btn" class="header-icon-btn w-10 h-10 flex items-center justify-center relative overflow-visible text-gray-600 hover:text-gray-800" aria-label="Notifications">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"/>
            </svg>
            <div id="notif-indicator" class="absolute -top-0.5 -right-0.5 min-w-[18px] min-h-[18px] px-1 bg-[#F96226] rounded-full hidden items-center justify-center flex">
              <span id="notif-count" class="text-[10px] text-white font-medium leading-none whitespace-nowrap"></span>
            </div>
          </a>
          <a href="Shopping_bag.html?from=shipping" id="cart-btn" class="header-icon-btn w-10 h-10 flex items-center justify-center relative overflow-visible text-gray-600 hover:text-gray-800" aria-label="Shopping bag">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119.993z"/>
            </svg>
            <div id="cart-indicator" class="absolute -top-0.5 -right-0.5 min-w-[18px] min-h-[18px] px-1 bg-[#939BFB] rounded-full hidden items-center justify-center flex">
              <span id="cart-count" class="text-[10px] text-white font-medium leading-none whitespace-nowrap"></span>
            </div>
          </a>
        </div>
      </div>
    </div>
    <main id="main-content" class="pt-20 px-4 pb-40">
      <div id="addresses-list" class="mb-6 space-y-4"></div>
      <div id="add-address-section" class="flex justify-center"><a href="Edit_AddNew_Shipping_Address.html" id="add-address-btn" class="flex items-center justify-center rounded-full bg-[#939BFB] py-2 px-5 text-sm font-medium text-white dm-sans hover:bg-[#838cf3]"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2" class="w-4 h-4 mr-1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path>
          </svg>Add New Address
        </a></div>
      <!-- Delete modal: uses accent orange (#F96226), NOT error red (#EF4444). Error red is reserved for form validation. -->
      <div id="delete-modal" class="fixed inset-0 z-[60] hidden bg-black/40 flex items-center justify-center p-4">
        <div class="w-full max-w-[390px] rounded-2xl bg-white p-5 shadow-2xl border border-gray-100">
          <div class="text-center">
            <div class="mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-orange-100">
              <svg class="w-6 h-6 text-[#F96226]" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"/></svg></div>
            <h3 class="poppins mb-2 text-base font-semibold text-gray-900">Delete Address</h3>
            <p class="mb-4 text-sm text-gray-600 dm-sans">Are you sure you want to delete this address? This action cannot be undone.</p>
            <div class="flex gap-2">
              <button id="cancel-delete" class="flex-1 rounded-full border border-[#B7C7FF] bg-white py-2 px-3 text-sm font-medium text-[#939BFB] dm-sans hover:bg-[#939BFB] hover:text-white hover:border-[#939BFB] transition-colors">Cancel</button>
              <button id="confirm-delete" class="flex-1 rounded-full bg-[#F96226] py-2 px-3 text-sm font-medium text-white dm-sans hover:opacity-90 transition-opacity">Delete</button>
            </div>
          </div>
        </div>
      </div>
      <div id="default-warning-modal" class="fixed inset-0 z-[60] hidden bg-black/40 flex items-center justify-center p-4">
        <div class="w-full max-w-[390px] rounded-2xl bg-white p-5 shadow-2xl border border-gray-100">
          <div class="text-center">
            <div class="mx-auto mb-3 flex h-12 w-12 items-center justify-center rounded-full bg-amber-100">
              <svg class="w-6 h-6 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"/></svg>
            </div>
            <h3 class="poppins mb-2 text-base font-semibold text-gray-900">Cannot Delete Default Address</h3>
            <p class="mb-4 text-sm text-gray-600 dm-sans">You need to select another address as default before deleting this one.</p>
            <button id="close-warning" class="w-full rounded-full bg-[#939BFB] py-2 px-4 text-sm font-medium text-white dm-sans hover:opacity-90 transition-opacity">Got It</button>
          </div>
        </div>
      </div>
    </main>
    <nav id="bottom-navigation" class="fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[390px] bg-white border-t border-gray-100 z-50">
        <div class="flex items-center justify-around py-2">
            <a href="Home.html" class="bottom-nav-btn flex flex-col items-center p-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"/></svg>
                <span class="text-xs">Home</span>
            </a>
            <a href="Picks.html" class="bottom-nav-btn flex flex-col items-center p-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"/></svg>
                <span class="text-xs">Picks</span>
            </a>
            <a href="Wishlist.html" class="bottom-nav-btn flex flex-col items-center p-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"/></svg>
                <span class="text-xs">Wishlist</span>
            </a>
            <a id="shipping-nav-profile-link" href="User_Profile_Free_Plan.html" class="bottom-nav-btn active flex flex-col items-center p-2">
                <span id="shipping-nav-profile-icon" class="flex items-center justify-center w-6 h-6 mb-1"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"/></svg></span>
                <img id="shipping-nav-profile-photo" class="w-6 h-6 rounded-full object-cover mb-1 hidden" src="" alt="Profile">
                <span class="text-xs">Profile</span>
            </a>
        </div>
    </nav>
</div>
    <script>
      var ADDRESS_STORAGE_KEY = 'goshopme_addresses';
      var seedAddresses = [
        { id: 'addr_1', firstName: 'Maria', lastName: 'Lopez', addressLine1: '123 Rue Saint-HonorÃ©, Apt 405', addressLine2: '', city: 'Paris', zipCode: '75001', region: 'ÃŽle-de-France', country: 'France', phoneCode: 'ðŸ‡«ðŸ‡· +33', phoneNumber: '612345678', isDefault: true },
        { id: 'addr_2', firstName: 'Maria', lastName: 'Lopez', addressLine1: '456 Broadway Avenue', addressLine2: '', city: 'New York', zipCode: '10001', region: 'NY', country: 'United States', phoneCode: 'ðŸ‡ºðŸ‡¸ +1', phoneNumber: '5551234567', isDefault: false }
      ];
      function getAddresses() {
        try {
          var stored = localStorage.getItem(ADDRESS_STORAGE_KEY);
          if (stored) return JSON.parse(stored);
        } catch (e) {}
        return seedAddresses.slice();
      }
      function saveAddresses(list) {
        try { localStorage.setItem(ADDRESS_STORAGE_KEY, JSON.stringify(list)); } catch (e) {}
      }
      function renderAddressCard(addr, index) {
        var num = (addr.phoneNumber || '').replace(/\D/g, '');
        var phone = (addr.phoneCode || '') + (num ? ' ' + (num.length === 10 ? '(' + num.slice(0,3) + ') ' + num.slice(3,6) + '-' + num.slice(6) : num) : '');
        var defId = 'default-' + (addr.id || index);
        return '<div id="address-card-' + (addr.id || index) + '" class="rounded-2xl border border-gray-100 bg-white p-4 shadow-sm" data-address-id="' + (addr.id || '') + '">' +
          '<div class="mb-3 flex items-start justify-between"><div class="flex-1">' +
          '<h3 class="text-sm font-semibold text-gray-900 poppins">' + (addr.firstName || '') + ' ' + (addr.lastName || '') + '</h3>' +
          '<p class="text-sm text-gray-600">' + (addr.addressLine1 || '') + '</p>' +
          (addr.addressLine2 ? '<p class="text-sm text-gray-600">' + addr.addressLine2 + '</p>' : '') +
          '<p class="text-sm text-gray-600">' + (addr.city || '') + ', ' + (addr.region || '') + ' ' + (addr.zipCode || '') + '</p>' +
          '<p class="text-sm text-gray-600">' + (addr.country || '') + '</p>' +
          '<p class="text-sm text-gray-600">' + phone + '</p>' +
          '</div><div class="flex items-center">' +
          '<input type="radio" name="default-address" id="' + defId + '" ' + (addr.isDefault ? 'checked' : '') + ' class="h-5 w-5 border-2 border-gray-300 accent-[#939BFB] focus:ring-2 focus:ring-[#939BFB] default-radio" data-address-id="' + (addr.id || '') + '">' +
          '<label for="' + defId + '" class="sr-only">Set as default address</label></div></div>' +
          '<div class="flex gap-2"><a href="Edit_AddNew_Shipping_Address.html?mode=edit&id=' + encodeURIComponent(addr.id || '') + '" class="edit-btn flex-1 rounded-full border-2 border-shine-primary bg-white py-2 px-3 text-sm font-medium text-shine-primary hover:bg-shine-primary hover:text-white transition-colors dm-sans text-center">Edit</a>' +
          '<button class="delete-btn flex-1 rounded-full border-2 border-gray-200 bg-white py-2 px-3 text-sm font-medium text-gray-600 hover:bg-[#F96226] hover:border-[#F96226] hover:text-white transition-colors dm-sans">Delete</button></div></div>';
      }
      function renderAddressList() {
        var list = getAddresses();
        var html = list.map(renderAddressCard).join('');
        document.getElementById('addresses-list').innerHTML = html;
        bindAddressEvents();
      }
      function bindAddressEvents() {
        var deleteModal = document.getElementById('delete-modal');
        var defaultWarningModal = document.getElementById('default-warning-modal');
        var cancelDeleteBtn = document.getElementById('cancel-delete');
        var confirmDeleteBtn = document.getElementById('confirm-delete');
        var closeWarningBtn = document.getElementById('close-warning');
        var addressToDeleteId = null;
        document.querySelectorAll('.delete-btn').forEach(function(btn) {
          btn.onclick = function() {
            var card = this.closest('[id^="address-card"]');
            var radio = card.querySelector('input[type="radio"]');
            if (radio.checked) { defaultWarningModal.classList.remove('hidden'); return; }
            addressToDeleteId = card.getAttribute('data-address-id');
            deleteModal.classList.remove('hidden');
          };
        });
        cancelDeleteBtn.onclick = function() { deleteModal.classList.add('hidden'); addressToDeleteId = null; };
        confirmDeleteBtn.onclick = function() {
          if (addressToDeleteId) {
            var list = getAddresses().filter(function(a) { return a.id !== addressToDeleteId; });
            saveAddresses(list);
            renderAddressList();
          }
          deleteModal.classList.add('hidden');
          addressToDeleteId = null;
        };
        closeWarningBtn.onclick = function() { defaultWarningModal.classList.add('hidden'); };
        document.querySelectorAll('.default-radio').forEach(function(radio) {
          radio.onchange = function() {
            if (!this.checked) return;
            var id = this.getAttribute('data-address-id');
            var list = getAddresses();
            list.forEach(function(a) { a.isDefault = (a.id === id); });
            saveAddresses(list);
          };
        });
      }
      window.addEventListener('load', function() {
        renderAddressList();
      });
    </script>
    <script>
    (function() {
        var plan = (localStorage.getItem('__userPlan') || '').toLowerCase();
        var profileHref = (plan === 'paid' || plan === 'true') ? 'User_Profile_Paid_Plan.html' : 'User_Profile_Free_Plan.html';
        var profileLink = document.getElementById('shipping-nav-profile-link');
        if (profileLink) profileLink.href = profileHref;
        var saved = localStorage.getItem('profilePhoto');
        var img = document.getElementById('shipping-nav-profile-photo');
        var icon = document.getElementById('shipping-nav-profile-icon');
        if (img && icon) {
            if (saved) { img.src = saved; img.classList.remove('hidden'); icon.classList.add('hidden'); }
            else { img.src = ''; img.classList.add('hidden'); icon.classList.remove('hidden'); }
        }
    })();
    </script>
  

</body></html>

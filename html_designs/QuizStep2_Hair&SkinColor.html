<!DOCTYPE html><html><head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="stylesheet" href="css/mobile-optimization.css">
    <title>Style Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    screens: {
                        'mobile': '390px',
                    }
                }
            }
        }
    </script>
    <script> window.FontAwesomeConfig = { autoReplaceSvg: 'nest'};</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link href="https://fonts.googleapis.com/css2?family=Wix+Madefor+Display:wght@400;500;600&amp;display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fuhkwang:wght@400;500;600;700&display=swap');
        .font-fuhkwang { font-family: 'Fuhkwang', sans-serif; }
        .font-wix { font-family: 'Wix Madefor Display', sans-serif; }
        
        .mobile-container {
            max-width: 390px;
            margin: 0 auto;
            min-height: 844px;
            background: #ffffff;
        }
        
        @media (min-width: 391px) {
            .mobile-container {
                box-shadow: 0 0 20px rgba(0,0,0,0.1);
                border-radius: 0 0 20px 20px;
            }
        }

        .tone-option {
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .tone-option .color-circle {
            border: 2px solid transparent;
            transition: all 0.2s ease;
        }

        .tone-option.selected .color-circle {
            border-color: #939BFB;
            transform: scale(1.05);
        }

        ::placeholder {
            color: #9CA3AF;
        }
        .header-icon-btn { transition: transform 0.2s ease, color 0.2s ease; }
        .header-icon-btn:hover { transform: translateY(-2px); }
    </style>
</head>
<body class="bg-gray-50 font-wix overflow-x-hidden">

<div class="mobile-container">
    <div id="header" class="sticky top-0 left-0 right-0 bg-white z-50 border-b border-gray-100">
        <div class="flex items-center justify-between px-5 py-4">
            <button type="button" onclick="goBack()" class="header-icon-btn w-10 h-10 flex items-center justify-center p-2 text-gray-600 hover:text-gray-800" aria-label="Go back">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"/></svg>
            </button>
            <h2 class="text-lg font-wix font-semibold text-gray-900">Style Quiz</h2>
            <div class="w-6"></div>
        </div>
        <div class="px-5 pb-4">
            <div class="flex items-center justify-between mb-2">
                <span class="text-xs text-gray-500 font-wix">Step 2 of 6</span>
                <span class="text-xs text-[#939BFB] font-medium font-wix">33%</span>
            </div>
            <div class="flex space-x-1.5">
                <div class="flex-1 bg-[#939BFB] h-1.5 rounded-full"></div>
                <div class="flex-1 bg-[#939BFB] h-1.5 rounded-full"></div>
                <div class="flex-1 bg-gray-200 h-1.5 rounded-full"></div>
                <div class="flex-1 bg-gray-200 h-1.5 rounded-full"></div>
                <div class="flex-1 bg-gray-200 h-1.5 rounded-full"></div>
                <div class="flex-1 bg-gray-200 h-1.5 rounded-full"></div>
            </div>
        </div>
    </div>

    <div class="flex-1 overflow-y-auto pb-32" style="height: calc(844px - 160px);">
        
        <div id="skin-tone-section" class="px-5 py-6 bg-white">
            <h3 class="text-xl font-wix font-semibold text-gray-900 mb-2">Which skin tone is closest to yours?</h3>
            <p class="text-gray-600 text-sm font-wix mb-6">This helps us recommend colors that complement you best</p>
            
            <div class="grid grid-cols-5 gap-3">
                <div class="tone-option flex flex-col items-center gap-2" onclick="selectTone(this, 'very-light')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: #FFE4D6;"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Very Light</p>
                </div>

                <div class="tone-option flex flex-col items-center gap-2" onclick="selectTone(this, 'light')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: #F5D5C0;"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Light</p>
                </div>

                <div class="tone-option flex flex-col items-center gap-2" onclick="selectTone(this, 'medium')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: #D4A574;"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Medium</p>
                </div>

                <div class="tone-option flex flex-col items-center gap-2" onclick="selectTone(this, 'tan')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: #A67C52;"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Tan</p>
                </div>

                <div class="tone-option flex flex-col items-center gap-2" onclick="selectTone(this, 'deep')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: #5D4037;"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Deep</p>
                </div>
            </div>
        </div>

        <div id="hair-color-section" class="px-5 py-6 bg-white border-t border-gray-100">
            <h3 class="text-xl font-wix font-semibold text-gray-900 mb-2">What is your hair color?</h3>
            <p class="text-gray-600 text-sm font-wix mb-6">Help us suggest styles that match your natural coloring</p>
            
            <div class="grid grid-cols-4 gap-3">
                <div class="tone-option flex flex-col items-center gap-2" onclick="selectHair(this, 'blonde')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: #F5E6C8;"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Blonde</p>
                </div>

                <div class="tone-option flex flex-col items-center gap-2" onclick="selectHair(this, 'light-brown')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: #B8936D;"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Light Brown</p>
                </div>

                <div class="tone-option flex flex-col items-center gap-2" onclick="selectHair(this, 'dark-brown')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: #6B4423;"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Dark Brown</p>
                </div>

                <div class="tone-option flex flex-col items-center gap-2" onclick="selectHair(this, 'black')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: #1A1A1A;"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Black</p>
                </div>

                <div class="tone-option flex flex-col items-center gap-2" onclick="selectHair(this, 'red')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: #C9543D;"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Red</p>
                </div>

                <div class="tone-option flex flex-col items-center gap-2" onclick="selectHair(this, 'grey-white')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: #D3D3D3;"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Grey / White</p>
                </div>

                <div class="tone-option flex flex-col items-center gap-2" onclick="selectHair(this, 'other')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: linear-gradient(135deg, #FF6B9D 0%, #C06C84 25%, #6C5B7B 50%, #355C7D 75%, #2A9D8F 100%);"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Other</p>
                </div>
            </div>
        </div>

        <div id="eye-color-section" class="px-5 py-6 bg-white border-t border-gray-100">
            <h3 class="text-xl font-wix font-semibold text-gray-900 mb-2">What is your eye color?</h3>
            <p class="text-gray-600 text-sm font-wix mb-6">This helps us personalize your style recommendations</p>
            
            <div class="grid grid-cols-4 gap-3">
                <div class="tone-option flex flex-col items-center gap-2" onclick="selectEye(this, 'blue')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: #6B9AC4;"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Blue</p>
                </div>

                <div class="tone-option flex flex-col items-center gap-2" onclick="selectEye(this, 'green')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: #4E8B5A;"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Green</p>
                </div>

                <div class="tone-option flex flex-col items-center gap-2" onclick="selectEye(this, 'hazel')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: #8B7B5A;"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Hazel</p>
                </div>

                <div class="tone-option flex flex-col items-center gap-2" onclick="selectEye(this, 'brown')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: #6B4E3A;"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Brown</p>
                </div>

                <div class="tone-option flex flex-col items-center gap-2" onclick="selectEye(this, 'grey')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: #7B8A9E;"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Grey</p>
                </div>

                <div class="tone-option flex flex-col items-center gap-2" onclick="selectEye(this, 'amber')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: #C9A227;"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Amber</p>
                </div>

                <div class="tone-option flex flex-col items-center gap-2" onclick="selectEye(this, 'other')">
                    <div class="color-circle w-10 h-10 rounded-full flex-shrink-0" style="background: linear-gradient(135deg, #6B9AC4 0%, #4E8B5A 33%, #8B7B5A 66%, #6B4E3A 100%);"></div>
                    <p class="text-xs font-medium text-gray-700 text-center">Other</p>
                </div>
            </div>
        </div>
    </div>

    <div class="fixed bottom-0 left-1/2 transform -translate-x-1/2 w-full max-w-[390px] bg-white border-t border-gray-100 px-5 py-5">
        <button id="next-btn" class="w-3/4 mx-auto flex items-center justify-center py-2.5 px-4 rounded-full bg-gray-300 text-gray-500 font-medium text-sm transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed" onclick="nextStep()" disabled>
            <span>Continue</span>
        </button>
    </div>
</div>

<script>
let selectedSkinTone = null;
let selectedHairColor = null;
let selectedEyeColor = null;

function goBack() {
    window.location.href = 'QuizStep1_BodyShape.html';
}

function updateContinueButton() {
    const nextBtn = document.getElementById('next-btn');
    const canContinue = selectedSkinTone && selectedHairColor && selectedEyeColor;
    nextBtn.disabled = !canContinue;
    if (canContinue) {
        nextBtn.classList.remove('bg-gray-300', 'text-gray-500');
        nextBtn.classList.add('bg-[#939BFB]', 'text-white', 'hover:bg-[#7B85F7]', 'shadow-md', 'shadow-[#939BFB]/20');
    } else {
        nextBtn.classList.add('bg-gray-300', 'text-gray-500');
        nextBtn.classList.remove('bg-[#939BFB]', 'text-white', 'hover:bg-[#7B85F7]', 'shadow-md', 'shadow-[#939BFB]/20');
    }
}

function selectTone(element, tone) {
    document.querySelectorAll('#skin-tone-section .tone-option').forEach(opt => {
        opt.classList.remove('selected');
    });
    element.classList.add('selected');
    selectedSkinTone = tone;
    updateContinueButton();
}

function selectHair(element, color) {
    document.querySelectorAll('#hair-color-section .tone-option').forEach(opt => {
        opt.classList.remove('selected');
    });
    element.classList.add('selected');
    selectedHairColor = color;
    updateContinueButton();
}

function selectEye(element, color) {
    document.querySelectorAll('#eye-color-section .tone-option').forEach(opt => {
        opt.classList.remove('selected');
    });
    element.classList.add('selected');
    selectedEyeColor = color;
    updateContinueButton();
}

function nextStep() {
    if (!selectedSkinTone || !selectedHairColor || !selectedEyeColor) return;
    if (typeof window.GoShopMeQuizAPI !== 'undefined' && window.GoShopMeQuizAPI.submitQuizStep2) {
        window.GoShopMeQuizAPI.submitQuizStep2({ skinTone: selectedSkinTone, hairColor: selectedHairColor, eyeColor: selectedEyeColor });
    }
    try {
        var d = JSON.parse(localStorage.getItem('__quizData') || '{}');
        d.skinTone = selectedSkinTone; d.hairColor = selectedHairColor; d.eyeColor = selectedEyeColor;
        localStorage.setItem('__quizData', JSON.stringify(d));
    } catch (e) {}
    window.location.href = 'QuizStep3_ColorsLike&Dislike.html';
}

// API readiness: prefill from window.__QUIZ_STEP2_DATA__, get/set for API
(function() {
    window.getQuizStep2Data = function() { return { skinTone: selectedSkinTone, hairColor: selectedHairColor, eyeColor: selectedEyeColor }; };
    window.setQuizStep2Data = function(data) {
        if (data && data.skinTone) {
            var el = document.querySelector('#skin-tone-section .tone-option[onclick*="' + data.skinTone + '"]');
            if (el) selectTone(el, data.skinTone);
        }
        if (data && data.hairColor) {
            var el = document.querySelector('#hair-color-section .tone-option[onclick*="' + data.hairColor + '"]');
            if (el) selectHair(el, data.hairColor);
        }
        if (data && data.eyeColor) {
            var el = document.querySelector('#eye-color-section .tone-option[onclick*="' + data.eyeColor + '"]');
            if (el) selectEye(el, data.eyeColor);
        }
    };
    document.addEventListener('DOMContentLoaded', function() {
        if (window.__QUIZ_STEP2_DATA__) window.setQuizStep2Data(window.__QUIZ_STEP2_DATA__);
    });
})();
</script>

</body></html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="stylesheet" href="css/mobile-optimization.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <title>Current Style Goals - GoShopMe</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'shine-primary': '#939BFB',
                        'shine-accent': '#F96226'
                    }
                }
            }
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700&family=Karla:wght@400;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/chat-drawer-drag.css">

    
    <style>
        
/* ---- MOBILE FULL-WIDTH OVERRIDE (match Home) ---- */
@media screen and (max-width: 768px) {
  #app-shell, #main-content, #auth-screen, #welcome_screen, #quiz-screen, #onboarding-screen,
  #bottom-nav, #bottom-navigation, #header, #app-header,
  #chat-drawer, #chat-input-bar, #shai-chat-drawer, #return-chat-drawer, #return-chat-input-bar, #chat-input-collapsed,
  #shai-chat-drawer-wrapper, #chat-drawer-wrapper,
  body > div, body > main {
    max-width: 100vw !important;
    width: 100% !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    box-shadow: none !important;
    left: 0 !important;
    right: 0 !important;
    transform: none !important;
  }
  [class*="left-1/2"][class*="-translate-x-1/2"]:not([class*="rounded-full"]) {
    left: 0 !important;
    right: 0 !important;
    max-width: 100vw !important;
    width: 100% !important;
    transform: none !important;
  }
  #chat-drawer.translate-y-full, #shai-chat-drawer.translate-y-full, #return-chat-drawer.translate-y-full {
    transform: translateY(100%) !important;
  }
  #bottom-nav > div, #bottom-navigation > div, nav#bottom-nav > div, nav#bottom-navigation > div {
    padding-top: 2px !important;
    padding-bottom: 24px !important;
  }
}

::-webkit-scrollbar { display: none; }
        .dm-sans { font-family: 'DM Sans', 'Karla', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        .poppins { font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        .header-icon-btn { transition: transform 0.2s ease, color 0.2s ease; }
        .header-icon-btn:hover { transform: translateY(-2px); }
        /* Edit options - match quiz design (primary #939BFB) */
        .edit-option { transition: all 0.2s ease; cursor: pointer; border: 1.5px solid #E5E7EB; }
        .edit-option:hover { border-color: #939BFB; }
        .edit-option:has(input:checked) { background: #F5F7FF; border-color: #939BFB; }
        .edit-option input { appearance: none; -webkit-appearance: none; width: 18px; height: 18px; border: 2px solid #D1D5DB; border-radius: 4px; cursor: pointer; flex-shrink: 0; }
        .edit-option input[type="radio"] { border-radius: 50%; }
        .edit-option input[type="checkbox"]:checked {
            border-color: #939BFB; background: #939BFB;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='20 6 9 17 4 12'%3E%3C/polyline%3E%3C/svg%3E");
            background-size: 12px 12px; background-position: center;
        }
        .edit-option input[type="radio"]:checked {
            border-color: #939BFB; background: #939BFB;
            background-image: radial-gradient(circle at center, white 5px, transparent 6px);
            background-size: 18px 18px; background-position: center;
        }
        .color-swatch { width: 32px; height: 32px; border-radius: 6px; cursor: pointer; border: 2px solid transparent; transition: all 0.2s ease; }
        .color-swatch:hover { transform: scale(1.05); }
        .color-swatch.liked { border-color: #939BFB; box-shadow: 0 0 0 2px rgba(147,155,251,0.3); }
        .color-swatch.avoided { border-color: #EF4444; box-shadow: 0 0 0 2px rgba(239,68,68,0.3); }
        /* Body shape & appearance - minimized quiz visuals */
        .body-shape-tile { transition: all 0.2s ease; cursor: pointer; border: 1.5px solid #E5E7EB; }
        .body-shape-tile:hover { border-color: #939BFB; }
        .body-shape-tile.selected { background: #F5F7FF; border-color: #939BFB; }
        .body-shape-tile.selected .sg-check { opacity: 1; }
        .tone-tile { transition: all 0.2s ease; cursor: pointer; }
        .tone-tile .color-circle { border: 2px solid transparent; transition: all 0.2s ease; }
        .tone-tile.selected .color-circle { border-color: #939BFB; transform: scale(1.05); }
        .bottom-nav-btn { display: flex; flex-direction: column; align-items: center; color: #6B7280; transition: color 0.2s ease-in-out; }
        .bottom-nav-btn:hover, .bottom-nav-btn.active { color: #939BFB; }
        .bottom-nav-btn:hover svg, .bottom-nav-btn:hover span, .bottom-nav-btn.active svg, .bottom-nav-btn.active span { color: #939BFB; }
        .bottom-nav-btn svg { width: 20px; height: 20px; stroke-width: 1.5; margin-bottom: 4px; }
    </style>
</head>
<body class="bg-[#F6F6F6] dm-sans">
    <div class="max-w-[390px] mx-auto min-h-screen bg-white shadow-2xl">
        <!-- Header -->
        <header class="sticky top-0 left-0 right-0 max-w-[390px] mx-auto bg-white z-50 border-b border-gray-100">
            <div class="flex items-center justify-between px-5 py-4">
                <a href="User_Profile_Free_Plan.html" id="style-goals-back-link" class="header-icon-btn w-10 h-10 flex items-center justify-center p-2 text-gray-600 hover:text-gray-800" aria-label="Back">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
                    </svg>
                </a>
                <h1 class="text-lg font-semibold poppins text-gray-900">Current Style Goals</h1>
                <div class="flex items-center gap-0">
                    <a href="Notifications_Screen.html?from=style-goals" class="header-icon-btn w-10 h-10 flex items-center justify-center text-gray-600 hover:text-gray-800" aria-label="Notifications">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"></path>
                        </svg>
                    </a>
                    <a href="Shopping_bag.html?from=style-goals" class="header-icon-btn w-10 h-10 flex items-center justify-center text-gray-600 hover:text-gray-800" aria-label="Shopping bag">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119.993z"></path>
                        </svg>
                    </a>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="px-5 py-6 pb-40">
            <p class="text-gray-500 text-sm dm-sans mb-6">Your style preferences — used by ShAI to personalize recommendations.</p>

            <div id="style-goals-content" class="space-y-6">
                <!-- Body Shape -->
                <section class="bg-gray-50 rounded-xl p-4" data-section="body-shape">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-sm font-semibold poppins text-gray-900">Body Shape</h3>
                        <button type="button" class="edit-section-btn text-shine-primary text-xs font-medium hover:underline dm-sans" data-section="body-shape">Edit</button>
                    </div>
                    <div class="view-mode">
                        <p id="sg-body-shape" class="text-sm text-gray-700 dm-sans">—</p>
                    </div>
                    <div class="edit-mode hidden">
                        <p class="text-xs text-gray-500 mb-2">Tap to select</p>
                        <div id="edit-body-shape" class="grid grid-cols-2 gap-1.5">
                            <div class="body-shape-tile flex items-center gap-2 p-2 rounded-lg" data-shape="apple">
                                <div class="w-8 h-12 flex-shrink-0 flex items-center justify-center"><svg class="w-8 h-12" viewBox="0 0 80 120" fill="none"><ellipse cx="40" cy="55" rx="28" ry="32" fill="#939BFB" opacity="0.5"/><path d="M40 12c-4 0-7 3-7 7s3 7 7 7 7-3 7-7-3-7-7-7z" stroke="#000" stroke-width="1.2" fill="none"/><path d="M40 26v8M32 34l4 4M48 34l-4 4" stroke="#000" stroke-width="1.2" stroke-linecap="round"/><path d="M40 34c0 0-8 4-10 12 0 4 2 8 4 10M40 34c0 0 8 4 10 12 0 4-2 8-4 10" stroke="#000" stroke-width="1.2" stroke-linecap="round"/><path d="M28 88c2 4 4 8 4 12v12M52 88c-2 4-4 8-4 12v12" stroke="#000" stroke-width="1.2" stroke-linecap="round"/></svg></div>
                                <span class="text-xs font-medium text-gray-900">Apple</span>
                                <div class="sg-check w-3.5 h-3.5 rounded-full bg-[#939BFB] flex items-center justify-center ml-auto opacity-0"><i class="fas fa-check text-white text-[6px]"></i></div>
                            </div>
                            <div class="body-shape-tile flex items-center gap-2 p-2 rounded-lg" data-shape="pear">
                                <div class="w-8 h-12 flex-shrink-0 flex items-center justify-center"><svg class="w-8 h-12" viewBox="0 0 80 120" fill="none"><ellipse cx="40" cy="75" rx="26" ry="28" fill="#939BFB" opacity="0.5"/><path d="M40 12c-4 0-7 3-7 7s3 7 7 7 7-3 7-7-3-7-7-7z" stroke="#000" stroke-width="1.2" fill="none"/><path d="M40 26v6M30 32l4 4M50 32l-4 4" stroke="#000" stroke-width="1.2" stroke-linecap="round"/><path d="M40 32c0 0-6 2-8 10 0 3 1 6 3 8M40 32c0 0 6 2 8 10 0 3-1 6-3 8" stroke="#000" stroke-width="1.2" stroke-linecap="round"/><path d="M22 88c2 6 4 10 4 14v12M58 88c-2 6-4 10-4 14v12" stroke="#000" stroke-width="1.2" stroke-linecap="round"/></svg></div>
                                <span class="text-xs font-medium text-gray-900">Pear</span>
                                <div class="sg-check w-3.5 h-3.5 rounded-full bg-[#939BFB] flex items-center justify-center ml-auto opacity-0"><i class="fas fa-check text-white text-[6px]"></i></div>
                            </div>
                            <div class="body-shape-tile flex items-center gap-2 p-2 rounded-lg" data-shape="inverted-triangle">
                                <div class="w-8 h-12 flex-shrink-0 flex items-center justify-center"><svg class="w-8 h-12" viewBox="0 0 80 120" fill="none"><path d="M15 35 L65 35 L40 85 Z" fill="#939BFB" opacity="0.5"/><path d="M40 12c-4 0-7 3-7 7s3 7 7 7 7-3 7-7-3-7-7-7z" stroke="#000" stroke-width="1.2" fill="none"/><path d="M40 26v6M26 32l4 4M54 32l-4 4" stroke="#000" stroke-width="1.2" stroke-linecap="round"/><path d="M40 32c0 0-10 4-12 12 0 4 2 8 4 10M40 32c0 0 10 4 12 12 0 4-2 8-4 10" stroke="#000" stroke-width="1.2" stroke-linecap="round"/><path d="M32 88c2 4 4 8 4 12v12M48 88c-2 4-4 8-4 12v12" stroke="#000" stroke-width="1.2" stroke-linecap="round"/></svg></div>
                                <span class="text-xs font-medium text-gray-900">Inverted</span>
                                <div class="sg-check w-3.5 h-3.5 rounded-full bg-[#939BFB] flex items-center justify-center ml-auto opacity-0"><i class="fas fa-check text-white text-[6px]"></i></div>
                            </div>
                            <div class="body-shape-tile flex items-center gap-2 p-2 rounded-lg" data-shape="rectangle">
                                <div class="w-8 h-12 flex-shrink-0 flex items-center justify-center"><svg class="w-8 h-12" viewBox="0 0 80 120" fill="none"><rect x="22" y="32" width="36" height="56" rx="4" fill="#939BFB" opacity="0.5"/><path d="M40 12c-4 0-7 3-7 7s3 7 7 7 7-3 7-7-3-7-7-7z" stroke="#000" stroke-width="1.2" fill="none"/><path d="M40 26v6M32 32l4 4M48 32l-4 4" stroke="#000" stroke-width="1.2" stroke-linecap="round"/><path d="M40 32c0 0-6 2-8 10 0 3 1 6 3 8M40 32c0 0 6 2 8 10 0 3-1 6-3 8" stroke="#000" stroke-width="1.2" stroke-linecap="round"/><path d="M30 88c2 4 4 8 4 12v12M50 88c-2 4-4 8-4 12v12" stroke="#000" stroke-width="1.2" stroke-linecap="round"/></svg></div>
                                <span class="text-xs font-medium text-gray-900">Rectangle</span>
                                <div class="sg-check w-3.5 h-3.5 rounded-full bg-[#939BFB] flex items-center justify-center ml-auto opacity-0"><i class="fas fa-check text-white text-[6px]"></i></div>
                            </div>
                            <div class="body-shape-tile flex items-center gap-2 p-2 rounded-lg" data-shape="hourglass">
                                <div class="w-8 h-12 flex-shrink-0 flex items-center justify-center"><svg class="w-8 h-12" viewBox="0 0 80 120" fill="none"><path d="M28 32 L52 32 L40 58 L28 32 Z" fill="#939BFB" opacity="0.5"/><path d="M28 88 L52 88 L40 62 L28 88 Z" fill="#939BFB" opacity="0.5"/><path d="M40 12c-4 0-7 3-7 7s3 7 7 7 7-3 7-7-3-7-7-7z" stroke="#000" stroke-width="1.2" fill="none"/><path d="M40 26v4M30 30l4 4M50 30l-4 4" stroke="#000" stroke-width="1.2" stroke-linecap="round"/><path d="M40 30c0 0-8 4-10 12 0 4 2 6 4 8M40 30c0 0 8 4 10 12 0 4-2 6-4 8" stroke="#000" stroke-width="1.2" stroke-linecap="round"/><path d="M28 88c4 4 8 6 12 6s8-2 12-6" stroke="#000" stroke-width="1.2" stroke-linecap="round"/><path d="M28 94v10M52 94v10" stroke="#000" stroke-width="1.2" stroke-linecap="round"/></svg></div>
                                <span class="text-xs font-medium text-gray-900">Hourglass</span>
                                <div class="sg-check w-3.5 h-3.5 rounded-full bg-[#939BFB] flex items-center justify-center ml-auto opacity-0"><i class="fas fa-check text-white text-[6px]"></i></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Appearance -->
                <section class="bg-gray-50 rounded-xl p-4" data-section="appearance">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-sm font-semibold poppins text-gray-900">Appearance</h3>
                        <button type="button" class="edit-section-btn text-shine-primary text-xs font-medium hover:underline dm-sans" data-section="appearance">Edit</button>
                    </div>
                    <div class="view-mode">
                        <div class="space-y-1.5 text-sm text-gray-700 dm-sans">
                            <p><span class="text-gray-500">Skin tone:</span> <span id="sg-skin-tone">—</span></p>
                            <p><span class="text-gray-500">Hair color:</span> <span id="sg-hair-color">—</span></p>
                            <p><span class="text-gray-500">Eye color:</span> <span id="sg-eye-color">—</span></p>
                        </div>
                    </div>
                    <div class="edit-mode hidden space-y-4">
                        <div>
                            <p class="text-xs text-gray-500 mb-2">Skin tone — tap to select</p>
                            <div id="edit-skin-tone" class="flex flex-wrap gap-2">
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="very-light"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:#FFE4D6;"></div><span class="text-[10px] text-gray-600">Very Light</span></div>
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="light"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:#F5D5C0;"></div><span class="text-[10px] text-gray-600">Light</span></div>
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="medium"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:#D4A574;"></div><span class="text-[10px] text-gray-600">Medium</span></div>
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="tan"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:#A67C52;"></div><span class="text-[10px] text-gray-600">Tan</span></div>
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="deep"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:#5D4037;"></div><span class="text-[10px] text-gray-600">Deep</span></div>
                            </div>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500 mb-2">Hair color — tap to select</p>
                            <div id="edit-hair-color" class="flex flex-wrap gap-2">
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="blonde"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:#F5E6C8;"></div><span class="text-[10px] text-gray-600">Blonde</span></div>
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="light-brown"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:#B8936D;"></div><span class="text-[10px] text-gray-600">Light Brown</span></div>
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="dark-brown"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:#6B4423;"></div><span class="text-[10px] text-gray-600">Dark Brown</span></div>
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="black"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:#1A1A1A;"></div><span class="text-[10px] text-gray-600">Black</span></div>
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="red"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:#C9543D;"></div><span class="text-[10px] text-gray-600">Red</span></div>
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="grey-white"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:#D3D3D3;"></div><span class="text-[10px] text-gray-600">Grey/White</span></div>
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="other"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:linear-gradient(135deg,#FF6B9D,#C06C84,#6C5B7B,#355C7D,#2A9D8F);"></div><span class="text-[10px] text-gray-600">Other</span></div>
                            </div>
                        </div>
                        <div>
                            <p class="text-xs text-gray-500 mb-2">Eye color — tap to select</p>
                            <div id="edit-eye-color" class="flex flex-wrap gap-2">
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="blue"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:#6B9AC4;"></div><span class="text-[10px] text-gray-600">Blue</span></div>
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="green"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:#4E8B5A;"></div><span class="text-[10px] text-gray-600">Green</span></div>
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="hazel"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:#8B7B5A;"></div><span class="text-[10px] text-gray-600">Hazel</span></div>
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="brown"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:#6B4E3A;"></div><span class="text-[10px] text-gray-600">Brown</span></div>
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="grey"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:#7B8A9E;"></div><span class="text-[10px] text-gray-600">Grey</span></div>
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="amber"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:#C9A227;"></div><span class="text-[10px] text-gray-600">Amber</span></div>
                                <div class="tone-tile flex flex-col items-center gap-1" data-tone="other"><div class="color-circle w-8 h-8 rounded-full flex-shrink-0" style="background:linear-gradient(135deg,#6B9AC4,#4E8B5A,#8B7B5A,#6B4E3A);"></div><span class="text-[10px] text-gray-600">Other</span></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Colors -->
                <section class="bg-gray-50 rounded-xl p-4" data-section="colors">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-sm font-semibold poppins text-gray-900">Colors</h3>
                        <button type="button" class="edit-section-btn text-shine-primary text-xs font-medium hover:underline dm-sans" data-section="colors">Edit</button>
                    </div>
                    <div class="view-mode">
                        <p class="text-gray-500 text-xs mb-1.5">Liked</p>
                        <p id="sg-liked-colors" class="text-sm text-gray-700 dm-sans mb-3">—</p>
                        <p class="text-gray-500 text-xs mb-1.5">Avoid</p>
                        <p id="sg-avoided-colors" class="text-sm text-gray-700 dm-sans">—</p>
                    </div>
                    <div class="edit-mode hidden">
                        <p class="text-xs text-gray-500 mb-2">Liked (tap to toggle)</p>
                        <div id="edit-liked-colors" class="flex flex-wrap gap-1.5 mb-4"></div>
                        <p class="text-xs text-gray-500 mb-2">Avoid (tap to toggle)</p>
                        <div id="edit-avoided-colors" class="flex flex-wrap gap-1.5"></div>
                    </div>
                </section>

                <!-- Sizes & Heels -->
                <section class="bg-gray-50 rounded-xl p-4" data-section="sizes-heels">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-sm font-semibold poppins text-gray-900">Sizes & Heels</h3>
                        <button type="button" class="edit-section-btn text-shine-primary text-xs font-medium hover:underline dm-sans" data-section="sizes-heels">Edit</button>
                    </div>
                    <div class="view-mode">
                        <div class="space-y-1.5 text-sm text-gray-700 dm-sans">
                            <p><span class="text-gray-500">Heel heights:</span> <span id="sg-heel-heights">—</span></p>
                            <p><span class="text-gray-500">Size system:</span> <span id="sg-size-system">—</span></p>
                            <p><span class="text-gray-500">Top:</span> <span id="sg-size-top">—</span> · <span class="text-gray-500">Bottom:</span> <span id="sg-size-bottom">—</span> · <span class="text-gray-500">Dress:</span> <span id="sg-size-dress">—</span> · <span class="text-gray-500">Shoe:</span> <span id="sg-size-shoe">—</span></p>
                        </div>
                    </div>
                    <div class="edit-mode hidden space-y-3">
                        <div>
                            <label class="text-xs text-gray-500 block mb-2">Heel heights</label>
                            <div class="flex flex-wrap gap-2">
                                <label class="edit-option flex items-center gap-2 px-3 py-2 rounded-lg"><input type="checkbox" name="heel" value="flat" class="rounded"> <span class="text-sm">Flat</span></label>
                                <label class="edit-option flex items-center gap-2 px-3 py-2 rounded-lg"><input type="checkbox" name="heel" value="low" class="rounded"> <span class="text-sm">Low</span></label>
                                <label class="edit-option flex items-center gap-2 px-3 py-2 rounded-lg"><input type="checkbox" name="heel" value="mid" class="rounded"> <span class="text-sm">Mid</span></label>
                                <label class="edit-option flex items-center gap-2 px-3 py-2 rounded-lg"><input type="checkbox" name="heel" value="high" class="rounded"> <span class="text-sm">High</span></label>
                            </div>
                        </div>
                        <div>
                            <label class="text-xs text-gray-500 block mb-2">Size system</label>
                            <div class="flex gap-2">
                                <label class="edit-option flex items-center gap-2 px-3 py-2 rounded-lg"><input type="radio" name="size-system" value="eu" class="rounded-full"> <span class="text-sm">EU</span></label>
                                <label class="edit-option flex items-center gap-2 px-3 py-2 rounded-lg"><input type="radio" name="size-system" value="uk" class="rounded-full"> <span class="text-sm">UK</span></label>
                                <label class="edit-option flex items-center gap-2 px-3 py-2 rounded-lg"><input type="radio" name="size-system" value="us" class="rounded-full"> <span class="text-sm">US</span></label>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-2">
                            <div><label class="text-xs text-gray-500 block mb-1">Top</label><input type="text" id="edit-size-top" placeholder="e.g. M" class="w-full px-3 py-2 rounded-lg border border-gray-200 text-sm"></div>
                            <div><label class="text-xs text-gray-500 block mb-1">Bottom</label><input type="text" id="edit-size-bottom" placeholder="e.g. 32" class="w-full px-3 py-2 rounded-lg border border-gray-200 text-sm"></div>
                            <div><label class="text-xs text-gray-500 block mb-1">Dress</label><input type="text" id="edit-size-dress" placeholder="e.g. M" class="w-full px-3 py-2 rounded-lg border border-gray-200 text-sm"></div>
                            <div><label class="text-xs text-gray-500 block mb-1">Shoe</label><input type="text" id="edit-size-shoe" placeholder="e.g. 39" class="w-full px-3 py-2 rounded-lg border border-gray-200 text-sm"></div>
                        </div>
                    </div>
                </section>

                <!-- Brands -->
                <section class="bg-gray-50 rounded-xl p-4" data-section="brands">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-sm font-semibold poppins text-gray-900">Preferred Brands</h3>
                        <button type="button" class="edit-section-btn text-shine-primary text-xs font-medium hover:underline dm-sans" data-section="brands">Edit</button>
                    </div>
                    <div class="view-mode">
                        <p id="sg-brands" class="text-sm text-gray-700 dm-sans">—</p>
                    </div>
                    <div class="edit-mode hidden space-y-2">
                        <label class="edit-option flex items-center gap-2 p-3 rounded-lg"><input type="checkbox" name="brand" value="Luxury / Premium" class="rounded"> <span class="text-sm">Luxury / Premium</span></label>
                        <label class="edit-option flex items-center gap-2 p-3 rounded-lg"><input type="checkbox" name="brand" value="Contemporary / Mid-range" class="rounded"> <span class="text-sm">Contemporary / Mid-range</span></label>
                        <label class="edit-option flex items-center gap-2 p-3 rounded-lg"><input type="checkbox" name="brand" value="High-Street / Affordable" class="rounded"> <span class="text-sm">High-Street / Affordable</span></label>
                        <label class="edit-option flex items-center gap-2 p-3 rounded-lg"><input type="checkbox" name="brand" value="Sportswear / Casual" class="rounded"> <span class="text-sm">Sportswear / Casual</span></label>
                    </div>
                </section>

                <!-- Shopping Style -->
                <section class="bg-gray-50 rounded-xl p-4" data-section="shopping-style">
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-sm font-semibold poppins text-gray-900">Shopping Style</h3>
                        <button type="button" class="edit-section-btn text-shine-primary text-xs font-medium hover:underline dm-sans" data-section="shopping-style">Edit</button>
                    </div>
                    <div class="view-mode">
                        <div class="space-y-1.5 text-sm text-gray-700 dm-sans">
                            <p><span class="text-gray-500">Decision style:</span> <span id="sg-answer-q1">—</span></p>
                            <p><span class="text-gray-500">Shopping reason:</span> <span id="sg-answer-q2">—</span></p>
                            <p><span class="text-gray-500">Style variation:</span> <span id="sg-answer-q3">—</span></p>
                        </div>
                    </div>
                    <div class="edit-mode hidden space-y-4">
                        <div>
                            <label class="text-xs text-gray-500 block mb-2">When shopping, you usually:</label>
                            <div class="space-y-1.5">
                                <label class="edit-option flex items-center gap-2 p-3 rounded-lg"><input type="radio" name="q1" value="decide-quickly" class="rounded-full"> <span class="text-sm">Decide quickly</span></label>
                                <label class="edit-option flex items-center gap-2 p-3 rounded-lg"><input type="radio" name="q1" value="compare-options" class="rounded-full"> <span class="text-sm">Compare options</span></label>
                                <label class="edit-option flex items-center gap-2 p-3 rounded-lg"><input type="radio" name="q1" value="save-decide-later" class="rounded-full"> <span class="text-sm">Save and decide later</span></label>
                            </div>
                        </div>
                        <div>
                            <label class="text-xs text-gray-500 block mb-2">You mostly shop because:</label>
                            <div class="space-y-1.5">
                                <label class="edit-option flex items-center gap-2 p-3 rounded-lg"><input type="radio" name="q2" value="need-specific" class="rounded-full"> <span class="text-sm">You need something specific</span></label>
                                <label class="edit-option flex items-center gap-2 p-3 rounded-lg"><input type="radio" name="q2" value="refresh-wardrobe" class="rounded-full"> <span class="text-sm">You want to refresh your wardrobe</span></label>
                                <label class="edit-option flex items-center gap-2 p-3 rounded-lg"><input type="radio" name="q2" value="saw-something" class="rounded-full"> <span class="text-sm">You saw something you liked</span></label>
                            </div>
                        </div>
                        <div>
                            <label class="text-xs text-gray-500 block mb-2">When trying something new, you prefer:</label>
                            <div class="space-y-1.5">
                                <label class="edit-option flex items-center gap-2 p-3 rounded-lg"><input type="radio" name="q3" value="safe-choices" class="rounded-full"> <span class="text-sm">Safe choices</span></label>
                                <label class="edit-option flex items-center gap-2 p-3 rounded-lg"><input type="radio" name="q3" value="slight-variation" class="rounded-full"> <span class="text-sm">Slight variation</span></label>
                                <label class="edit-option flex items-center gap-2 p-3 rounded-lg"><input type="radio" name="q3" value="something-different" class="rounded-full"> <span class="text-sm">Something different</span></label>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Save Button (shown when editing) -->
            <div id="save-button-wrap" class="fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[390px] bg-white border-t border-gray-100 px-5 py-4 hidden z-[60]">
                <button type="button" id="save-style-goals-btn" class="w-full py-2.5 px-4 rounded-full bg-shine-primary text-white font-medium text-sm hover:bg-[#7B85F7] transition-colors dm-sans">
                    Save
                </button>
            </div>
        </main>

        <!-- Bottom Navigation -->
        <nav id="bottom-navigation" class="fixed bottom-0 left-1/2 -translate-x-1/2 w-full max-w-[390px] bg-white border-t border-gray-100 z-50">
            <div class="flex items-center justify-around py-2">
                <a href="Home.html" class="bottom-nav-btn flex flex-col items-center min-w-[60px] p-2 text-gray-400 hover:text-[#939BFB]">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"/></svg>
                    <span class="text-xs">Home</span>
                </a>
                <a href="Picks.html" class="bottom-nav-btn flex flex-col items-center min-w-[60px] p-2 text-gray-400 hover:text-[#939BFB]">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"/></svg>
                    <span class="text-xs">Picks</span>
                </a>
                <a href="Wishlist.html" class="bottom-nav-btn flex flex-col items-center min-w-[60px] p-2 text-gray-400 hover:text-[#939BFB]">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"/></svg>
                    <span class="text-xs">Wishlist</span>
                </a>
                <a id="style-goals-nav-profile-link" href="User_Profile_Free_Plan.html" class="bottom-nav-btn active flex flex-col items-center min-w-[60px] p-2 text-[#939BFB]">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"/></svg>
                    <span class="text-xs">Profile</span>
                </a>
            </div>
        </nav>
    </div>

    <script>
    (function() {
        var COLOR_OPTIONS = ['Black','White','Gray','Light Gray','Beige','Navy','Blue','Pastel Blue','Baby Blue','Powder Blue','Teal','Mint','Green','Pastel Green','Sage','Yellow','Cream','Lemon','Orange','Peach','Red','Blush','Crimson','Pink','Rose','Pastel Pink','Purple','Lavender','Lilac','Fuchsia','Brown','Amber','Apricot','Champagne','Ivory'];
        var COLOR_HEX = { 'Black':'#000','White':'#FFF','Gray':'#6B7280','Light Gray':'#F3F4F6','Beige':'#F5F5DC','Navy':'#1E40AF','Blue':'#3B82F6','Pastel Blue':'#DBEAFE','Baby Blue':'#BAE6FD','Powder Blue':'#E0F2FE','Teal':'#14B8A6','Mint':'#CCFBF1','Green':'#10B981','Pastel Green':'#D1FAE5','Sage':'#ECFDF5','Yellow':'#EAB308','Cream':'#FEF9C3','Lemon':'#FEF3C7','Orange':'#F59E0B','Peach':'#FFEDD5','Red':'#EF4444','Blush':'#FEE2E2','Crimson':'#DC2626','Pink':'#EC4899','Rose':'#FCE7F3','Pastel Pink':'#FBCFE8','Purple':'#A855F7','Lavender':'#F3E8FF','Lilac':'#E9D5FF','Fuchsia':'#D946EF','Brown':'#92400E','Amber':'#D97706','Apricot':'#FED7AA','Champagne':'#FDE68A','Ivory':'#FFF7ED' };

        var labels = {
            bodyShape: { apple: 'Apple', pear: 'Pear', 'inverted-triangle': 'Inverted Triangle', rectangle: 'Rectangle', hourglass: 'Hourglass' },
            skinTone: { 'very-light': 'Very Light', light: 'Light', medium: 'Medium', tan: 'Tan', deep: 'Deep' },
            hairColor: { blonde: 'Blonde', 'light-brown': 'Light Brown', 'dark-brown': 'Dark Brown', black: 'Black', red: 'Red', 'grey-white': 'Grey / White', other: 'Other' },
            eyeColor: { blue: 'Blue', green: 'Green', hazel: 'Hazel', brown: 'Brown', grey: 'Grey', amber: 'Amber', other: 'Other' },
            heelHeights: { flat: 'Flat', low: 'Low', mid: 'Mid', high: 'High' },
            sizeSystem: { eu: 'EU', uk: 'UK', us: 'US' },
            q1: { 'decide-quickly': 'Decide quickly', 'compare-options': 'Compare options', 'save-decide-later': 'Save & decide later' },
            q2: { 'need-specific': 'Need something specific', 'refresh-wardrobe': 'Refresh wardrobe', 'saw-something': 'Saw something inspiring' },
            q3: { 'safe-choices': 'Safe choices', 'slight-variation': 'Slight variation', 'something-different': 'Something different' }
        };

        var activeEditSection = null;

        function getQuizData() {
            if (typeof window.GoShopMeQuizAPI !== 'undefined' && window.GoShopMeQuizAPI.getQuizData) {
                return window.GoShopMeQuizAPI.getQuizData();
            }
            if (window.__QUIZ_STYLE_GOALS_DATA__) return window.__QUIZ_STYLE_GOALS_DATA__;
            try {
                var s = localStorage.getItem('__quizData');
                if (s) return JSON.parse(s);
            } catch (e) {}
            return {};
        }

        function saveQuizData(data) {
            try {
                localStorage.setItem('__quizData', JSON.stringify(data));
                window.__QUIZ_STYLE_GOALS_DATA__ = data;
                if (typeof window.GoShopMeQuizAPI !== 'undefined' && window.GoShopMeQuizAPI.updateQuizData) {
                    window.GoShopMeQuizAPI.updateQuizData(data);
                }
            } catch (e) {}
        }

        function format(val, map) {
            if (!val) return '—';
            if (Array.isArray(val)) return val.map(function(v) { return (map && map[v]) ? map[v] : v; }).join(', ');
            return (map && map[val]) ? map[val] : val;
        }

        function render(data) {
            var el = function(id) { return document.getElementById(id); };
            if (el('sg-body-shape')) el('sg-body-shape').textContent = format(data.bodyShape, labels.bodyShape);
            if (el('sg-skin-tone')) el('sg-skin-tone').textContent = format(data.skinTone, labels.skinTone);
            if (el('sg-hair-color')) el('sg-hair-color').textContent = format(data.hairColor, labels.hairColor);
            if (el('sg-eye-color')) el('sg-eye-color').textContent = format(data.eyeColor, labels.eyeColor);
            if (el('sg-liked-colors')) el('sg-liked-colors').textContent = (data.likedColors && data.likedColors.length) ? data.likedColors.join(', ') : '—';
            if (el('sg-avoided-colors')) el('sg-avoided-colors').textContent = (data.avoidedColors && data.avoidedColors.length) ? data.avoidedColors.join(', ') : '—';
            if (el('sg-heel-heights')) el('sg-heel-heights').textContent = format(data.heelHeights, labels.heelHeights);
            if (el('sg-size-system')) el('sg-size-system').textContent = format(data.sizeSystem, labels.sizeSystem);
            if (data.sizes) {
                if (el('sg-size-top')) el('sg-size-top').textContent = data.sizes.top || '—';
                if (el('sg-size-bottom')) el('sg-size-bottom').textContent = data.sizes.bottom || '—';
                if (el('sg-size-dress')) el('sg-size-dress').textContent = data.sizes.dress || '—';
                if (el('sg-size-shoe')) el('sg-size-shoe').textContent = data.sizes.shoe || '—';
            }
            if (el('sg-brands')) el('sg-brands').textContent = (data.brands && data.brands.length) ? data.brands.join(', ') : '—';
            if (data.answers) {
                if (el('sg-answer-q1')) el('sg-answer-q1').textContent = format(data.answers.q1, labels.q1);
                if (el('sg-answer-q2')) el('sg-answer-q2').textContent = format(data.answers.q2, labels.q2);
                if (el('sg-answer-q3')) el('sg-answer-q3').textContent = format(data.answers.q3, labels.q3);
            }
        }

        function populateEditForms(data) {
            data = data || {};
            var el = function(id) { return document.getElementById(id); };
            var shape = data.bodyShape || 'apple';
            document.querySelectorAll('#edit-body-shape .body-shape-tile').forEach(function(t) {
                t.classList.toggle('selected', t.getAttribute('data-shape') === shape);
            });
            var skin = data.skinTone || 'medium';
            document.querySelectorAll('#edit-skin-tone .tone-tile').forEach(function(t) {
                t.classList.toggle('selected', t.getAttribute('data-tone') === skin);
            });
            var hair = data.hairColor || 'dark-brown';
            document.querySelectorAll('#edit-hair-color .tone-tile').forEach(function(t) {
                t.classList.toggle('selected', t.getAttribute('data-tone') === hair);
            });
            var eye = data.eyeColor || 'brown';
            document.querySelectorAll('#edit-eye-color .tone-tile').forEach(function(t) {
                t.classList.toggle('selected', t.getAttribute('data-tone') === eye);
            });
            document.querySelectorAll('input[name="heel"]').forEach(function(cb) {
                cb.checked = (data.heelHeights || []).indexOf(cb.value) >= 0;
            });
            var sys = data.sizeSystem || 'eu';
            document.querySelectorAll('input[name="size-system"]').forEach(function(r) {
                r.checked = r.value === sys;
            });
            if (data.sizes) {
                if (el('edit-size-top')) el('edit-size-top').value = data.sizes.top || '';
                if (el('edit-size-bottom')) el('edit-size-bottom').value = data.sizes.bottom || '';
                if (el('edit-size-dress')) el('edit-size-dress').value = data.sizes.dress || '';
                if (el('edit-size-shoe')) el('edit-size-shoe').value = data.sizes.shoe || '';
            }
            document.querySelectorAll('input[name="brand"]').forEach(function(cb) {
                cb.checked = (data.brands || []).indexOf(cb.value) >= 0;
            });
            if (data.answers) {
                ['q1','q2','q3'].forEach(function(q) {
                    var v = data.answers[q];
                    document.querySelectorAll('input[name="' + q + '"]').forEach(function(r) {
                        r.checked = r.value === v;
                    });
                });
            }
        }

        function buildColorSwatches(containerId, currentArr, mode) {
            var c = document.getElementById(containerId);
            if (!c) return;
            c.innerHTML = '';
            COLOR_OPTIONS.forEach(function(name) {
                var hex = COLOR_HEX[name] || '#ccc';
                var div = document.createElement('div');
                div.className = 'color-swatch ' + (currentArr.indexOf(name) >= 0 ? mode : '');
                div.style.background = hex;
                if (hex === '#FFF' || hex === '#F3F4F6' || hex === '#F5F5DC' || hex === '#DBEAFE' || hex === '#BAE6FD' || hex === '#E0F2FE' || hex === '#CCFBF1' || hex === '#D1FAE5' || hex === '#ECFDF5' || hex === '#FEF9C3' || hex === '#FEF3C7' || hex === '#FFEDD5' || hex === '#FEE2E2' || hex === '#FCE7F3' || hex === '#FBCFE8' || hex === '#F3E8FF' || hex === '#E9D5FF' || hex === '#FED7AA' || hex === '#FDE68A' || hex === '#FFF7ED') div.style.border = '1px solid #E5E7EB';
                div.setAttribute('data-color', name);
                div.onclick = function() {
                    var arr = mode === 'liked' ? window._editLiked : window._editAvoided;
                    var i = arr.indexOf(name);
                    if (i >= 0) arr.splice(i, 1);
                    else arr.push(name);
                    buildColorSwatches(containerId, arr, mode);
                };
                c.appendChild(div);
            });
        }

        function enterEditMode(sectionId) {
            if (activeEditSection) {
                document.querySelector('[data-section="' + activeEditSection + '"] .view-mode').classList.remove('hidden');
                document.querySelector('[data-section="' + activeEditSection + '"] .edit-mode').classList.add('hidden');
            }
            activeEditSection = sectionId;
            document.querySelector('[data-section="' + sectionId + '"] .view-mode').classList.add('hidden');
            document.querySelector('[data-section="' + sectionId + '"] .edit-mode').classList.remove('hidden');
            document.getElementById('save-button-wrap').classList.remove('hidden');
            var data = getQuizData();
            populateEditForms(data);
            if (sectionId === 'colors') {
                window._editLiked = (data.likedColors || []).slice();
                window._editAvoided = (data.avoidedColors || []).slice();
                buildColorSwatches('edit-liked-colors', window._editLiked, 'liked');
                buildColorSwatches('edit-avoided-colors', window._editAvoided, 'avoided');
            }
        }

        function exitEditMode() {
            if (activeEditSection) {
                document.querySelector('[data-section="' + activeEditSection + '"] .view-mode').classList.remove('hidden');
                document.querySelector('[data-section="' + activeEditSection + '"] .edit-mode').classList.add('hidden');
            }
            activeEditSection = null;
            document.getElementById('save-button-wrap').classList.add('hidden');
        }

        function collectFromEditForm() {
            var data = getQuizData();
            var section = activeEditSection;
            if (!section) return data;

            if (section === 'body-shape') {
                var sel = document.querySelector('#edit-body-shape .body-shape-tile.selected');
                if (sel) data.bodyShape = sel.getAttribute('data-shape');
            } else if (section === 'appearance') {
                var st = document.querySelector('#edit-skin-tone .tone-tile.selected');
                var hc = document.querySelector('#edit-hair-color .tone-tile.selected');
                var ec = document.querySelector('#edit-eye-color .tone-tile.selected');
                if (st) data.skinTone = st.getAttribute('data-tone');
                if (hc) data.hairColor = hc.getAttribute('data-tone');
                if (ec) data.eyeColor = ec.getAttribute('data-tone');
            } else if (section === 'colors') {
                data.likedColors = (window._editLiked || []).slice();
                data.avoidedColors = (window._editAvoided || []).slice();
            } else if (section === 'sizes-heels') {
                data.heelHeights = [];
                document.querySelectorAll('input[name="heel"]:checked').forEach(function(cb) { data.heelHeights.push(cb.value); });
                var sys = document.querySelector('input[name="size-system"]:checked');
                data.sizeSystem = sys ? sys.value : 'eu';
                data.sizes = data.sizes || {};
                var t = document.getElementById('edit-size-top');
                var b = document.getElementById('edit-size-bottom');
                var d = document.getElementById('edit-size-dress');
                var s = document.getElementById('edit-size-shoe');
                if (t) data.sizes.top = t.value.trim();
                if (b) data.sizes.bottom = b.value.trim();
                if (d) data.sizes.dress = d.value.trim();
                if (s) data.sizes.shoe = s.value.trim();
            } else if (section === 'brands') {
                data.brands = [];
                document.querySelectorAll('input[name="brand"]:checked').forEach(function(cb) { data.brands.push(cb.value); });
            } else if (section === 'shopping-style') {
                data.answers = data.answers || {};
                ['q1','q2','q3'].forEach(function(q) {
                    var r = document.querySelector('input[name="' + q + '"]:checked');
                    if (r) data.answers[q] = r.value;
                });
            }
            return data;
        }

        function saveAndExit() {
            var data = collectFromEditForm();
            saveQuizData(data);
            exitEditMode();
            render(data);
        }

        document.addEventListener('DOMContentLoaded', function() {
            var data = getQuizData();
            render(data);
            populateEditForms(data);

            var plan = (localStorage.getItem('__userPlan') || '').toLowerCase();
            var profileHref = (plan === 'paid' || plan === 'true') ? 'User_Profile_Paid_Plan.html' : 'User_Profile_Free_Plan.html';
            var backLink = document.getElementById('style-goals-back-link');
            if (backLink) backLink.href = profileHref;
            var navProfileLink = document.getElementById('style-goals-nav-profile-link');
            if (navProfileLink) navProfileLink.href = profileHref;

            document.querySelectorAll('.edit-section-btn').forEach(function(btn) {
                btn.onclick = function() {
                    enterEditMode(btn.getAttribute('data-section'));
                };
            });

            document.querySelectorAll('#edit-body-shape .body-shape-tile').forEach(function(tile) {
                tile.onclick = function() {
                    document.querySelectorAll('#edit-body-shape .body-shape-tile').forEach(function(t) { t.classList.remove('selected'); });
                    tile.classList.add('selected');
                };
            });

            document.querySelectorAll('#edit-skin-tone .tone-tile').forEach(function(tile) {
                tile.onclick = function() {
                    document.querySelectorAll('#edit-skin-tone .tone-tile').forEach(function(t) { t.classList.remove('selected'); });
                    tile.classList.add('selected');
                };
            });
            document.querySelectorAll('#edit-hair-color .tone-tile').forEach(function(tile) {
                tile.onclick = function() {
                    document.querySelectorAll('#edit-hair-color .tone-tile').forEach(function(t) { t.classList.remove('selected'); });
                    tile.classList.add('selected');
                };
            });
            document.querySelectorAll('#edit-eye-color .tone-tile').forEach(function(tile) {
                tile.onclick = function() {
                    document.querySelectorAll('#edit-eye-color .tone-tile').forEach(function(t) { t.classList.remove('selected'); });
                    tile.classList.add('selected');
                };
            });

            document.getElementById('save-style-goals-btn').onclick = saveAndExit;
        });
    })();
    </script>
</body>
</html>

